"use strict";var Garten=(()=>{var fe=Object.defineProperty;var Ct=Object.getOwnPropertyDescriptor;var yt=Object.getOwnPropertyNames;var wt=Object.prototype.hasOwnProperty;var St=(t,e)=>{for(var i in e)fe(t,i,{get:e[i],enumerable:!0})},xt=(t,e,i,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of yt(e))!wt.call(t,n)&&n!==i&&fe(t,n,{get:()=>e[n],enumerable:!(r=Ct(e,n))||r.enumerable});return t};var Ft=t=>xt(fe({},"__esModule",{value:!0}),t);var hi={};St(hi,{ANIMATION:()=>Pt,CANVAS_STYLE:()=>te,COLORS:()=>Se,COMPLEXITY:()=>kt,CanvasHelper:()=>le,Color:()=>W,Environment:()=>G,EventEmitter:()=>ae,GEOMETRY:()=>P,GROWTH_PHASES:()=>R,Garten:()=>X,GrowthProgress:()=>ne,LAYOUT:()=>Lt,MutableVec2:()=>re,OPTION_BOUNDS:()=>Gt,PETAL_COUNTS:()=>Dt,PLANTS_PER_GENERATION:()=>At,PLANT_CATEGORIES:()=>Fe,PLANT_SIZES:()=>_t,PlantCategory:()=>j,PlantType:()=>be,SeededRandom:()=>se,SimpleEventEmitter:()=>ue,VARIATION_DEFAULTS:()=>B,Vec2:()=>$,applyPreset:()=>ve,applyTheme:()=>Re,calculateGrowthPhases:()=>Ue,calculateRawProgress:()=>qe,createConfig:()=>et,createPreset:()=>nt,createRandom:()=>I,createTheme:()=>rt,darkenColor:()=>Ye,default:()=>X,densityPreset:()=>st,drawLeaf:()=>oe,drawLeafPair:()=>$e,drawStem:()=>Xe,flowerPalettes:()=>ye,foliagePalettes:()=>we,getPixelRatio:()=>je,getPlantCategory:()=>U,getPlantVariation:()=>V,getPresetNames:()=>it,getThemeNames:()=>tt,hasCanvasSupport:()=>Qe,hexToRgb:()=>We,isBrowser:()=>Je,isPlantActive:()=>Ke,lightenColor:()=>Ne,prefersReducedMotion:()=>Ze,presets:()=>ce,rgbToHex:()=>Ve,seededRandom:()=>D,speedPreset:()=>lt,themes:()=>he});var _e={accent:"#F6821F",palette:"natural",flowerColors:[],foliageColors:[],accentWeight:.4},Pe={},T={duration:600,generations:47,maxHeight:.35,colors:_e,density:"normal",categories:null,loop:!1,speed:1,autoplay:!0,respectReducedMotion:!0,seed:Math.random()*1e5,maxPixelRatio:2,targetFPS:30,timingCurve:"linear",zIndex:-1,opacity:1,fadeHeight:0,fadeColor:"#ffffff",events:Pe},Et={duration:{min:1,max:86400},generations:{min:1,max:1e3},maxHeight:{min:.05,max:1},speed:{min:.01,max:100},maxPixelRatio:{min:.5,max:4},targetFPS:{min:1,max:120},opacity:{min:0,max:1},fadeHeight:{min:0,max:1},zIndex:{min:-9999,max:9999},seed:{min:0,max:1e9}};function A(t,e){let{min:i,max:r}=Et[e];return Math.min(r,Math.max(i,t))}var Le={sparse:[4,6],normal:[8,13],dense:[14,20],lush:[22,30]};function Tt(t){return/^[#.]?[\w-]+(\s*[>+~]?\s*[#.]?[\w-]+)*$/.test(t)}function ge(t){let e;if(typeof t.container=="string"){if(!Tt(t.container))throw new Error(`Garten: Invalid selector format "${t.container}". Use simple selectors like "#id" or ".class".`);let n=document.querySelector(t.container);if(!n||!(n instanceof HTMLElement))throw new Error(`Garten: Container "${t.container}" not found`);e=n}else e=t.container;let i={..._e,...t.colors},r={...Pe,...t.events};return{container:e,duration:A(t.duration??T.duration,"duration"),generations:A(t.generations??T.generations,"generations"),maxHeight:A(t.maxHeight??T.maxHeight,"maxHeight"),colors:i,density:t.density??T.density,categories:t.categories??T.categories,loop:t.loop??T.loop,speed:A(t.speed??T.speed,"speed"),autoplay:t.autoplay??T.autoplay,respectReducedMotion:t.respectReducedMotion??T.respectReducedMotion,seed:A(Number.isFinite(t.seed)?t.seed:T.seed,"seed"),maxPixelRatio:A(t.maxPixelRatio??T.maxPixelRatio,"maxPixelRatio"),targetFPS:A(t.targetFPS??T.targetFPS,"targetFPS"),timingCurve:t.timingCurve??T.timingCurve,zIndex:A(t.zIndex??T.zIndex,"zIndex"),opacity:A(t.opacity??T.opacity,"opacity"),fadeHeight:A(t.fadeHeight??T.fadeHeight,"fadeHeight"),fadeColor:t.fadeColor??T.fadeColor,events:r}}var j=(f=>(f[f.SimpleFlower=0]="SimpleFlower",f[f.Tulip=1]="Tulip",f[f.Daisy=2]="Daisy",f[f.Wildflower=3]="Wildflower",f[f.Grass=4]="Grass",f[f.Fern=5]="Fern",f[f.Bush=6]="Bush",f[f.Rose=7]="Rose",f[f.Lily=8]="Lily",f[f.Orchid=9]="Orchid",f[f.Succulent=10]="Succulent",f[f.Herb=11]="Herb",f[f.Specialty=12]="Specialty",f[f.TallFlower=13]="TallFlower",f[f.GiantGrass=14]="GiantGrass",f[f.Climber=15]="Climber",f[f.SmallTree=16]="SmallTree",f[f.Tropical=17]="Tropical",f[f.Conifer=18]="Conifer",f))(j||{}),be=(c=>(c.SimpleFlower="simple-flower",c.SimpleFlowerSmall="simple-flower-small",c.SimpleFlowerLarge="simple-flower-large",c.SimpleFlowerTall="simple-flower-tall",c.SimpleFlowerShort="simple-flower-short",c.SimpleFlowerWide="simple-flower-wide",c.SimpleFlowerNarrow="simple-flower-narrow",c.SimpleFlowerDouble="simple-flower-double",c.SimpleFlowerClustered="simple-flower-clustered",c.SimpleFlowerSpiral="simple-flower-spiral",c.Tulip="tulip",c.TulipTall="tulip-tall",c.TulipShort="tulip-short",c.TulipDouble="tulip-double",c.TulipFringed="tulip-fringed",c.TulipParrot="tulip-parrot",c.TulipLily="tulip-lily",c.TulipRembrandt="tulip-rembrandt",c.TulipDarwin="tulip-darwin",c.TulipTriumph="tulip-triumph",c.Daisy="daisy",c.DaisySmall="daisy-small",c.DaisyLarge="daisy-large",c.DaisyDouble="daisy-double",c.DaisyGerbera="daisy-gerbera",c.DaisyShasta="daisy-shasta",c.DaisyAfrican="daisy-african",c.DaisyOxeye="daisy-oxeye",c.DaisyPainted="daisy-painted",c.DaisyMarguerite="daisy-marguerite",c.Wildflower="wildflower",c.WildflowerClustered="wildflower-clustered",c.WildflowerScattered="wildflower-scattered",c.WildflowerTall="wildflower-tall",c.WildflowerMeadow="wildflower-meadow",c.WildflowerPrairie="wildflower-prairie",c.WildflowerAlpine="wildflower-alpine",c.WildflowerWoodland="wildflower-woodland",c.WildflowerCoastal="wildflower-coastal",c.WildflowerDesert="wildflower-desert",c.Grass="grass",c.GrassTall="grass-tall",c.GrassShort="grass-short",c.GrassWispy="grass-wispy",c.GrassThick="grass-thick",c.GrassPampas="grass-pampas",c.GrassFountain="grass-fountain",c.GrassBlue="grass-blue",c.GrassFeather="grass-feather",c.GrassReed="grass-reed",c.Fern="fern",c.FernSmall="fern-small",c.FernLarge="fern-large",c.FernCurly="fern-curly",c.FernStraight="fern-straight",c.FernMaidenhair="fern-maidenhair",c.FernBoston="fern-boston",c.FernStaghorn="fern-staghorn",c.FernBird="fern-bird",c.FernTree="fern-tree",c.Bush="bush",c.BushSmall="bush-small",c.BushLarge="bush-large",c.BushFlowering="bush-flowering",c.BushBerry="bush-berry",c.BushRound="bush-round",c.BushSpreading="bush-spreading",c.BushCompact="bush-compact",c.BushWild="bush-wild",c.BushOrnamental="bush-ornamental",c.Rose="rose",c.RoseClimbing="rose-climbing",c.RoseMiniature="rose-miniature",c.RoseWild="rose-wild",c.RoseDouble="rose-double",c.Lily="lily",c.LilyTiger="lily-tiger",c.LilyCalla="lily-calla",c.LilyDaylily="lily-daylily",c.LilyStargazer="lily-stargazer",c.Orchid="orchid",c.OrchidMoth="orchid-moth",c.OrchidDendrobium="orchid-dendrobium",c.OrchidCattleya="orchid-cattleya",c.OrchidVanda="orchid-vanda",c.Succulent="succulent",c.SucculentRosette="succulent-rosette",c.SucculentSpiky="succulent-spiky",c.SucculentTrailing="succulent-trailing",c.SucculentFlowering="succulent-flowering",c.Lavender="lavender",c.LavenderTall="lavender-tall",c.Sage="sage",c.Thyme="thyme",c.Rosemary="rosemary",c.Poppy="poppy",c.Sunflower="sunflower",c.Iris="iris",c.Peony="peony",c.Hydrangea="hydrangea",c.Dahlia="dahlia",c.Hollyhock="hollyhock",c.HollyhockDouble="hollyhock-double",c.Delphinium="delphinium",c.DelphiniumTall="delphinium-tall",c.Foxglove="foxglove",c.FoxgloveTall="foxglove-tall",c.Gladiolus="gladiolus",c.Lupine="lupine",c.Bamboo="bamboo",c.BambooTall="bamboo-tall",c.BambooClump="bamboo-clump",c.GiantReed="giant-reed",c.ElephantGrass="elephant-grass",c.Miscanthus="miscanthus",c.MiscanthusTall="miscanthus-tall",c.Cortaderia="cortaderia",c.Vine="vine",c.VineFlowering="vine-flowering",c.VineIvy="vine-ivy",c.Wisteria="wisteria",c.WisteriaCascade="wisteria-cascade",c.Clematis="clematis",c.ClematisLarge="clematis-large",c.MorningGlory="morning-glory",c.Sapling="sapling",c.SaplingOak="sapling-oak",c.SaplingMaple="sapling-maple",c.SaplingBirch="sapling-birch",c.TreeYoung="tree-young",c.TreeOrnamental="tree-ornamental",c.Birch="birch",c.Willow="willow",c.WillowWeeping="willow-weeping",c.CherryBlossom="cherry-blossom",c.PalmSmall="palm-small",c.PalmFan="palm-fan",c.BirdOfParadise="bird-of-paradise",c.BirdOfParadiseTall="bird-of-paradise-tall",c.Banana="banana",c.BananaSmall="banana-small",c.Pine="pine",c.PineYoung="pine-young",c.Cypress="cypress",c.CypressTall="cypress-tall",c.Juniper="juniper",c.JuniperTall="juniper-tall",c))(be||{});function D(t){let e=Math.sin(t*9999)*1e4;return e-Math.floor(e)}function I(t){let e=t;return()=>D(e++)}function J(t){let e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}function De(t,e,i){return"#"+[t,e,i].map(r=>Math.round(r).toString(16).padStart(2,"0")).join("")}function Me(t,e){let i=J(t);return i?De(Math.min(255,i.r+(255-i.r)*e),Math.min(255,i.g+(255-i.g)*e),Math.min(255,i.b+(255-i.b)*e)):t}function Q(t,e){let i=J(t);return i?De(i.r*(1-e),i.g*(1-e),i.b*(1-e)):t}function ee(t,e,i){return t+i()*(e-t)}function ke(){return typeof window>"u"?!1:window.matchMedia("(prefers-reduced-motion: reduce)").matches}function Ge(t){return typeof window>"u"?1:Math.min(window.devicePixelRatio||1,t)}function Ae(t,e){let i,r=(...n)=>{i!==void 0&&clearTimeout(i),i=setTimeout(()=>t(...n),e)};return r.cancel=()=>{i!==void 0&&(clearTimeout(i),i=void 0)},r}function Rt(t){if(typeof t=="number")return Math.max(.1,t);switch(t){case"ease-out":return 2;case"ease-in":return .5;case"ease-in-out":return 1;default:return 1}}function Ce(t,e,i){let r=t/e;if(i==="linear"||i===1)return r;if(i==="ease-in-out"){let s=r;return s*s*(3-2*s)}let n=Rt(i);return n>1?1-Math.pow(1-r,n):Math.pow(r,1/n)}var ye={natural:["#E85D75","#D64550","#F4A4B0","#C71585","#F4D03F","#FFDB58","#FFE135","#DAA520","#9B72AA","#7B68EE","#6A5ACD","#8A2BE2","#FFFEF0","#FFF8DC","#FFEFD5","#FAF0E6"],warm:["#FF6B6B","#FFA07A","#FFD93D","#FF8C42","#E85D75","#F4A4B0","#FFDB58","#FFE135","#FFF8DC","#FFEFD5"],cool:["#7B68EE","#6A5ACD","#9B72AA","#8A2BE2","#87CEEB","#B0E0E6","#ADD8E6","#E6E6FA","#FFFEF0","#F0F8FF"],monochrome:["#FFFFFF","#F5F5F5","#E8E8E8","#DCDCDC","#D3D3D3","#C0C0C0","#A9A9A9","#989898"],vibrant:["#FF1493","#FF4500","#FFD700","#32CD32","#00CED1","#1E90FF","#9400D3","#FF69B4","#FFA500","#ADFF2F"]},we={natural:{leaves:["#228B22","#2E8B57","#3CB371","#6B8E23","#556B2F","#8FBC8F"],stems:["#2D5A27","#3D6B37","#4A7C40","#5D8A52"]},warm:{leaves:["#6B8E23","#808000","#9ACD32","#7CFC00","#556B2F"],stems:["#5D5A27","#6D6B37","#5A6C40","#7D8A52"]},cool:{leaves:["#2E8B57","#20B2AA","#3CB371","#00FA9A","#66CDAA"],stems:["#2D5A47","#3D6B57","#4A7C60","#5D8A72"]},monochrome:{leaves:["#696969","#808080","#A9A9A9","#778899","#708090"],stems:["#4D4D4D","#5D5D5D","#6A6A6A","#7D7D7D"]},vibrant:{leaves:["#00FF00","#32CD32","#00FA9A","#7FFF00","#ADFF2F"],stems:["#228B22","#008000","#006400","#2E8B57"]}};function vt(t){return[t,Me(t,.15),Q(t,.15),Me(t,.3),Q(t,.08)]}function Ie(t){if(t.flowerColors.length>0)return t.flowerColors;let e=ye[t.palette],i=vt(t.accent),r=e.length+i.length,n=Math.round(r*t.accentWeight),s=r-n,o=[];for(let l=0;l<n;l++)o.push(i[l%i.length]);for(let l=0;l<s;l++)o.push(e[l%e.length]);return o}function Oe(t){return t.foliageColors.length>0?{leaves:t.foliageColors,stems:t.foliageColors.map(e=>Q(e,.2))}:we[t.palette]}var _t={STEM_THICKNESS_BASE:2,STEM_THICKNESS_THICK:2.5,STEM_THICKNESS_THIN:1.5,TRUNK_WIDTH_BASE:6,TRUNK_WIDTH_CONIFER:4,FLOWER_SIZE_SIMPLE:18,FLOWER_SIZE_SUNFLOWER:25,FLOWER_SIZE_DAHLIA:24,FLOWER_SIZE_ROSE:20,FLOWER_SIZE_LILY:22,FLOWER_SIZE_TULIP:22,FLOWER_SIZE_DAISY:16,FLOWER_SIZE_WILDFLOWER:14,FLOWER_SIZE_ORCHID:18,FLOWER_SIZE_PEONY:22,FLOWER_SIZE_IRIS:20,FLOWER_SIZE_HYDRANGEA:28,FLOWER_SIZE_POPPY:18,LEAF_SIZE_BASE:15,LEAF_SIZE_LARGE:20,LEAF_SIZE_SMALL:12,LEAF_SIZE_TROPICAL:30,FOLIAGE_RADIUS_BASE:25},R={STEM_GROWTH_RATE:1.5,LEAF_START:.3,LEAF_GROWTH_RATE:2,FLOWER_START:.5,FLOWER_GROWTH_RATE:2,FOLIAGE_START:.4,FOLIAGE_GROWTH_RATE:1.7,PLUME_START:.8,BUSH_FLOWER_START:.7,BUSH_FLOWER_START_COMPLEX:.5,LAVENDER_SPIKE_START:.5,PALM_FROND_START:.3,CONIFER_FOLIAGE_START:.2},Se={FLOWER_CENTER_GOLD:"#FFD700",FLOWER_CENTER_DARK:"#2D2D2D",SUNFLOWER_CENTER:"#4A3728",SUNFLOWER_CENTER_INNER:"#3D2D20",LILY_STAMENS:"#8B4513",DAHLIA_CENTER:"#DAA520",GRASS_PLUME:"#F5F5DC",LAVENDER_STEM:"#4A7C40",TULIP_STRIPE:"#FFFFFF",GROUND_COLOR:"rgba(139, 119, 101, 0.08)",CANVAS_BACKGROUND:"#ffffff",DEFAULT_ACCENT:"#F6821F",DEFAULT_FADE_COLOR:"#ffffff"},Pt={DEFAULT_DURATION:600,DEFAULT_GENERATIONS:47,DEFAULT_TARGET_FPS:30,DEFAULT_MAX_PIXEL_RATIO:2,RESIZE_DEBOUNCE_MS:100,GROUND_HEIGHT:8},Lt={DEFAULT_MAX_HEIGHT:.35,TALL_PLANT_HEIGHT_THRESHOLD:.5,TALL_GARDEN_THRESHOLD:.35,HEIGHT_BIAS_FACTOR:.5,TREE_TRUNK_RATIO:.6,CONIFER_TRUNK_RATIO:.95,TROPICAL_TRUNK_RATIO:.5,TALL_FLOWER_STEM_RATIO:1},Dt={SIMPLE_FLOWER:5,DAISY_MIN:8,DAISY_BASE:12,SUNFLOWER:16,ROSE_LAYERS:3,ROSE_LAYERS_COMPLEX:4,PEONY_LAYERS:5,DAHLIA_LAYERS:4,HYDRANGEA_FLORETS:20,SUCCULENT_LAYERS:3,SUCCULENT_LAYERS_COMPLEX:4,SUCCULENT_LEAVES:6,POPPY:4,IRIS_STANDARDS:3,ORCHID_SEPALS:3,ORCHID_SIDE_PETALS:2,LAVENDER_BUDS:8},B={SIZE_MULTIPLIER:1,HEIGHT_MULTIPLIER:1,PETAL_COUNT_MODIFIER:0,THICKNESS_MULTIPLIER:1,LEAN_MULTIPLIER:1,COMPLEXITY:.5},kt={DETAIL_THRESHOLD:.6,TULIP_STRIPE_THRESHOLD:.6,GRASS_PLUME_THRESHOLD:.7,FERN_CURL_THRESHOLD:.7,BUSH_FLOWERING_THRESHOLD:.8,ROSE_COMPLEX_THRESHOLD:.8,VINE_FLOWER_THRESHOLD:.6},te={LINE_CAP:"round",PLUME_ALPHA:.7,TULIP_STRIPE_ALPHA:.3},P={TWO_PI:Math.PI*2,PI:Math.PI,HALF_PI:Math.PI/2,BEZIER_CP_RATIO:.7,STEM_CP1_HEIGHT:.4,STEM_CP2_HEIGHT:.7,STEM_CP1_LEAN:.3,STEM_CP2_LEAN:.6},Gt={DURATION:{min:1,max:86400},GENERATIONS:{min:1,max:1e3},MAX_HEIGHT:{min:.05,max:1},SPEED:{min:.01,max:100},MAX_PIXEL_RATIO:{min:.5,max:4},TARGET_FPS:{min:1,max:120},OPACITY:{min:0,max:1},FADE_HEIGHT:{min:0,max:1},Z_INDEX:{min:-9999,max:9999},SEED:{min:0,max:1e9}},At={sparse:[4,6],normal:[8,13],dense:[14,20],lush:[22,30]};var xe={sizeMultiplier:B.SIZE_MULTIPLIER,heightMultiplier:B.HEIGHT_MULTIPLIER,petalCountModifier:B.PETAL_COUNT_MODIFIER,thicknessMultiplier:B.THICKNESS_MULTIPLIER,leanMultiplier:B.LEAN_MULTIPLIER,complexity:B.COMPLEXITY},It=new Map([["simple-flower-small",{sizeMultiplier:.7,heightMultiplier:.8,petalCountModifier:-1,thicknessMultiplier:.8,complexity:.3}],["simple-flower-large",{sizeMultiplier:1.4,heightMultiplier:1.1,petalCountModifier:2,thicknessMultiplier:1.2,leanMultiplier:.8,complexity:.7}],["simple-flower-tall",{sizeMultiplier:.9,heightMultiplier:1.3,thicknessMultiplier:.9,leanMultiplier:.7}],["simple-flower-short",{sizeMultiplier:1.1,heightMultiplier:.7,petalCountModifier:1,thicknessMultiplier:1.1,leanMultiplier:1.2,complexity:.4}],["simple-flower-wide",{sizeMultiplier:1.3,heightMultiplier:.9,petalCountModifier:3,complexity:.6}],["simple-flower-narrow",{sizeMultiplier:.8,heightMultiplier:1.1,petalCountModifier:-2,thicknessMultiplier:.8,leanMultiplier:.9,complexity:.4}],["simple-flower-double",{sizeMultiplier:1.2,petalCountModifier:5,thicknessMultiplier:1.1,leanMultiplier:.9,complexity:.8}],["simple-flower-clustered",{sizeMultiplier:.6,heightMultiplier:.9,petalCountModifier:-1,thicknessMultiplier:.9,leanMultiplier:1.3,complexity:.7}],["simple-flower-spiral",{petalCountModifier:2,leanMultiplier:1.5,complexity:.9}],["tulip",{leanMultiplier:.5}],["tulip-tall",{sizeMultiplier:.9,heightMultiplier:1.3,thicknessMultiplier:.9,leanMultiplier:.4}],["tulip-short",{sizeMultiplier:1.1,heightMultiplier:.7,thicknessMultiplier:1.1,leanMultiplier:.6,complexity:.4}],["tulip-double",{sizeMultiplier:1.2,petalCountModifier:3,thicknessMultiplier:1.1,leanMultiplier:.5,complexity:.8}],["tulip-fringed",{leanMultiplier:.5,complexity:.9}],["tulip-parrot",{sizeMultiplier:1.3,heightMultiplier:.95,petalCountModifier:2,leanMultiplier:.7,complexity:1}],["tulip-lily",{sizeMultiplier:1.1,heightMultiplier:1.1,thicknessMultiplier:.9,leanMultiplier:.6,complexity:.6}],["tulip-rembrandt",{leanMultiplier:.5,complexity:.7}],["tulip-darwin",{sizeMultiplier:1.15,heightMultiplier:1.2,leanMultiplier:.4}],["tulip-triumph",{sizeMultiplier:1.05,heightMultiplier:1.1,thicknessMultiplier:1.05,leanMultiplier:.5}],["daisy-small",{sizeMultiplier:.7,heightMultiplier:.8,petalCountModifier:-2,thicknessMultiplier:.8,complexity:.3}],["daisy-large",{sizeMultiplier:1.4,heightMultiplier:1.1,petalCountModifier:4,thicknessMultiplier:1.2,leanMultiplier:.8,complexity:.7}],["daisy-double",{sizeMultiplier:1.2,petalCountModifier:8,thicknessMultiplier:1.1,leanMultiplier:.9,complexity:.9}],["daisy-gerbera",{sizeMultiplier:1.5,petalCountModifier:6,thicknessMultiplier:1.3,leanMultiplier:.7,complexity:.8}],["daisy-shasta",{sizeMultiplier:1.3,heightMultiplier:1.15,petalCountModifier:4,thicknessMultiplier:1.1,leanMultiplier:.8,complexity:.6}],["daisy-african",{sizeMultiplier:1.1,heightMultiplier:.9,petalCountModifier:2,complexity:.7}],["daisy-oxeye",{sizeMultiplier:.9,thicknessMultiplier:.9,leanMultiplier:1.1,complexity:.4}],["daisy-painted",{heightMultiplier:.95,petalCountModifier:2,complexity:.8}],["daisy-marguerite",{sizeMultiplier:1.1,heightMultiplier:1.05,petalCountModifier:3,leanMultiplier:.9}],["wildflower-clustered",{sizeMultiplier:.8,heightMultiplier:.9,petalCountModifier:2,thicknessMultiplier:.9,leanMultiplier:1.2,complexity:.7}],["wildflower-scattered",{sizeMultiplier:.7,petalCountModifier:-1,thicknessMultiplier:.8,leanMultiplier:1.5,complexity:.6}],["wildflower-tall",{sizeMultiplier:.9,heightMultiplier:1.4,thicknessMultiplier:.9,leanMultiplier:.8}],["wildflower-meadow",{sizeMultiplier:1.1,petalCountModifier:1,leanMultiplier:1.3,complexity:.6}],["wildflower-prairie",{heightMultiplier:1.2,thicknessMultiplier:1.1}],["wildflower-alpine",{sizeMultiplier:.6,heightMultiplier:.7,petalCountModifier:-1,thicknessMultiplier:.8,leanMultiplier:.8,complexity:.4}],["wildflower-woodland",{sizeMultiplier:.9,heightMultiplier:.9,petalCountModifier:1,thicknessMultiplier:.9,leanMultiplier:1.1,complexity:.6}],["wildflower-coastal",{sizeMultiplier:.8,heightMultiplier:.8,leanMultiplier:1.4}],["wildflower-desert",{sizeMultiplier:.7,heightMultiplier:.6,petalCountModifier:-1,thicknessMultiplier:1.1,leanMultiplier:.9,complexity:.4}],["grass",{complexity:.3}],["grass-tall",{heightMultiplier:1.5,petalCountModifier:1,thicknessMultiplier:.9,leanMultiplier:.8,complexity:.4}],["grass-short",{heightMultiplier:.6,thicknessMultiplier:1.1,leanMultiplier:1.2,complexity:.2}],["grass-wispy",{sizeMultiplier:.8,heightMultiplier:1.2,petalCountModifier:2,thicknessMultiplier:.6,leanMultiplier:1.5}],["grass-thick",{sizeMultiplier:1.2,heightMultiplier:.9,petalCountModifier:-1,thicknessMultiplier:1.5,leanMultiplier:.7,complexity:.3}],["grass-pampas",{sizeMultiplier:1.3,heightMultiplier:1.8,petalCountModifier:3,thicknessMultiplier:1.2,complexity:.8}],["grass-fountain",{sizeMultiplier:1.1,heightMultiplier:1.3,petalCountModifier:4,thicknessMultiplier:.8,leanMultiplier:1.8,complexity:.7}],["grass-blue",{sizeMultiplier:.9,heightMultiplier:.8,petalCountModifier:1,complexity:.4}],["grass-feather",{heightMultiplier:1.4,petalCountModifier:2,thicknessMultiplier:.7,leanMultiplier:1.3,complexity:.6}],["grass-reed",{sizeMultiplier:.9,heightMultiplier:1.6,thicknessMultiplier:1.3,leanMultiplier:.5,complexity:.4}],["fern",{complexity:.6}],["fern-small",{sizeMultiplier:.6,heightMultiplier:.7,petalCountModifier:-2,thicknessMultiplier:.8,complexity:.4}],["fern-large",{sizeMultiplier:1.4,heightMultiplier:1.3,petalCountModifier:3,thicknessMultiplier:1.2,leanMultiplier:.8,complexity:.8}],["fern-curly",{heightMultiplier:.9,petalCountModifier:1,leanMultiplier:1.8,complexity:.9}],["fern-straight",{sizeMultiplier:.9,heightMultiplier:1.2,leanMultiplier:.3,complexity:.4}],["fern-maidenhair",{sizeMultiplier:.7,heightMultiplier:.8,petalCountModifier:4,thicknessMultiplier:.6,leanMultiplier:1.5,complexity:.9}],["fern-boston",{sizeMultiplier:1.2,petalCountModifier:2,leanMultiplier:1.6,complexity:.7}],["fern-staghorn",{sizeMultiplier:1.3,heightMultiplier:.9,thicknessMultiplier:1.3,complexity:.8}],["fern-bird",{sizeMultiplier:1.1,heightMultiplier:1.1,petalCountModifier:-1,thicknessMultiplier:1.2,leanMultiplier:.7}],["fern-tree",{sizeMultiplier:1.5,heightMultiplier:1.5,petalCountModifier:4,thicknessMultiplier:1.4,leanMultiplier:.5,complexity:.9}],["bush",{complexity:.6}],["bush-small",{sizeMultiplier:.6,heightMultiplier:.7,petalCountModifier:-2,thicknessMultiplier:.9,complexity:.4}],["bush-large",{sizeMultiplier:1.5,heightMultiplier:1.3,petalCountModifier:3,thicknessMultiplier:1.2,leanMultiplier:.8,complexity:.8}],["bush-flowering",{sizeMultiplier:1.1,petalCountModifier:4,complexity:.9}],["bush-berry",{sizeMultiplier:.9,heightMultiplier:.9,thicknessMultiplier:1.1,leanMultiplier:.9,complexity:.7}],["bush-round",{sizeMultiplier:1.2,heightMultiplier:.8,petalCountModifier:2,thicknessMultiplier:1.2,leanMultiplier:.5}],["bush-spreading",{sizeMultiplier:1.3,heightMultiplier:.7,petalCountModifier:1,leanMultiplier:1.5,complexity:.6}],["bush-compact",{sizeMultiplier:.8,heightMultiplier:.8,thicknessMultiplier:1.3,leanMultiplier:.7,complexity:.4}],["bush-wild",{sizeMultiplier:1.1,heightMultiplier:1.1,petalCountModifier:2,thicknessMultiplier:.9,leanMultiplier:1.4,complexity:.8}],["bush-ornamental",{petalCountModifier:3,leanMultiplier:.8,complexity:.7}],["rose",{leanMultiplier:.8,complexity:.8}],["rose-climbing",{sizeMultiplier:.9,heightMultiplier:1.5,thicknessMultiplier:.9,leanMultiplier:1.2,complexity:.7}],["rose-miniature",{sizeMultiplier:.5,heightMultiplier:.6,petalCountModifier:-2,thicknessMultiplier:.7,leanMultiplier:.9,complexity:.6}],["rose-wild",{sizeMultiplier:.8,heightMultiplier:1.1,petalCountModifier:-3,thicknessMultiplier:.8,leanMultiplier:1.3}],["rose-double",{sizeMultiplier:1.2,petalCountModifier:8,thicknessMultiplier:1.1,leanMultiplier:.7,complexity:1}],["lily",{leanMultiplier:.7,complexity:.7}],["lily-tiger",{sizeMultiplier:1.1,heightMultiplier:1.1,leanMultiplier:.8,complexity:.9}],["lily-calla",{sizeMultiplier:.9,heightMultiplier:1.2,petalCountModifier:-4,thicknessMultiplier:1.1,leanMultiplier:.5,complexity:.6}],["lily-daylily",{heightMultiplier:.9,thicknessMultiplier:.9}],["lily-stargazer",{sizeMultiplier:1.2,leanMultiplier:.6,complexity:.8}],["orchid",{leanMultiplier:.6,complexity:.9}],["orchid-moth",{sizeMultiplier:1.1,heightMultiplier:.9,thicknessMultiplier:.9,leanMultiplier:.7,complexity:.8}],["orchid-dendrobium",{sizeMultiplier:.8,heightMultiplier:1.2,petalCountModifier:2,thicknessMultiplier:.8,leanMultiplier:.8,complexity:.9}],["orchid-cattleya",{sizeMultiplier:1.3,heightMultiplier:.95,thicknessMultiplier:1.1,leanMultiplier:.5,complexity:1}],["orchid-vanda",{heightMultiplier:1.1,petalCountModifier:1,thicknessMultiplier:.9,leanMultiplier:.7,complexity:.85}],["succulent",{thicknessMultiplier:1.5,leanMultiplier:.3}],["succulent-rosette",{sizeMultiplier:1.1,heightMultiplier:.6,petalCountModifier:3,thicknessMultiplier:1.4,leanMultiplier:.2,complexity:.7}],["succulent-spiky",{sizeMultiplier:.9,heightMultiplier:1.2,petalCountModifier:-2,thicknessMultiplier:1.6,leanMultiplier:.4,complexity:.6}],["succulent-trailing",{sizeMultiplier:.7,heightMultiplier:.5,petalCountModifier:2,thicknessMultiplier:1.3,leanMultiplier:2,complexity:.6}],["succulent-flowering",{heightMultiplier:.8,petalCountModifier:4,thicknessMultiplier:1.4,leanMultiplier:.3,complexity:.8}],["lavender",{thicknessMultiplier:.8,leanMultiplier:.8,complexity:.7}],["lavender-tall",{sizeMultiplier:.9,heightMultiplier:1.4,petalCountModifier:2,thicknessMultiplier:.7,leanMultiplier:.6,complexity:.7}],["sage",{sizeMultiplier:1.1,heightMultiplier:.8,thicknessMultiplier:1.1,leanMultiplier:.9}],["thyme",{sizeMultiplier:.6,heightMultiplier:.5,petalCountModifier:-1,thicknessMultiplier:.7,leanMultiplier:1.2,complexity:.4}],["rosemary",{sizeMultiplier:.8,heightMultiplier:1.1,thicknessMultiplier:.9,leanMultiplier:.7,complexity:.6}],["poppy",{petalCountModifier:-1,thicknessMultiplier:.8,leanMultiplier:1.2,complexity:.6}],["sunflower",{sizeMultiplier:1.8,heightMultiplier:1.6,petalCountModifier:8,thicknessMultiplier:1.5,leanMultiplier:.4,complexity:.7}],["iris",{sizeMultiplier:1.1,heightMultiplier:1.2,leanMultiplier:.5,complexity:.8}],["peony",{sizeMultiplier:1.4,heightMultiplier:.9,petalCountModifier:10,thicknessMultiplier:1.3,leanMultiplier:.6,complexity:1}],["hydrangea",{sizeMultiplier:1.5,heightMultiplier:.85,petalCountModifier:15,thicknessMultiplier:1.4,leanMultiplier:.5,complexity:.9}],["dahlia",{sizeMultiplier:1.3,petalCountModifier:12,thicknessMultiplier:1.2,leanMultiplier:.6,complexity:.95}],["hollyhock",{thicknessMultiplier:1.2,leanMultiplier:.3,complexity:.7}],["hollyhock-double",{sizeMultiplier:1.2,heightMultiplier:1.1,petalCountModifier:5,thicknessMultiplier:1.3,leanMultiplier:.2,complexity:.9}],["delphinium",{sizeMultiplier:.8,heightMultiplier:1.2,petalCountModifier:2,leanMultiplier:.2,complexity:.8}],["delphinium-tall",{sizeMultiplier:.7,heightMultiplier:1.4,petalCountModifier:3,thicknessMultiplier:.9,leanMultiplier:.15,complexity:.85}],["foxglove",{sizeMultiplier:.9,heightMultiplier:1.1,thicknessMultiplier:1.1,leanMultiplier:.25,complexity:.75}],["foxglove-tall",{sizeMultiplier:.85,heightMultiplier:1.3,petalCountModifier:2,leanMultiplier:.2,complexity:.8}],["gladiolus",{sizeMultiplier:1.1,heightMultiplier:1.15,petalCountModifier:1,thicknessMultiplier:1.2,leanMultiplier:.2,complexity:.7}],["lupine",{sizeMultiplier:.9,petalCountModifier:4,leanMultiplier:.3,complexity:.75}],["bamboo",{thicknessMultiplier:.8,leanMultiplier:.15,complexity:.6}],["bamboo-tall",{sizeMultiplier:.9,heightMultiplier:1.3,thicknessMultiplier:.7,leanMultiplier:.1,complexity:.65}],["bamboo-clump",{sizeMultiplier:1.2,heightMultiplier:.9,petalCountModifier:3,thicknessMultiplier:.9,leanMultiplier:.2,complexity:.7}],["giant-reed",{sizeMultiplier:1.1,heightMultiplier:1.1,leanMultiplier:.25}],["elephant-grass",{sizeMultiplier:1.3,heightMultiplier:1.2,petalCountModifier:2,thicknessMultiplier:1.2,leanMultiplier:.3,complexity:.55}],["miscanthus",{petalCountModifier:1,thicknessMultiplier:.9,leanMultiplier:.35,complexity:.6}],["miscanthus-tall",{sizeMultiplier:.95,heightMultiplier:1.25,petalCountModifier:2,thicknessMultiplier:.85,leanMultiplier:.3,complexity:.65}],["cortaderia",{sizeMultiplier:1.4,heightMultiplier:1.15,petalCountModifier:3,thicknessMultiplier:1.1,leanMultiplier:.4,complexity:.7}],["vine",{thicknessMultiplier:.6,leanMultiplier:.8,complexity:.6}],["vine-flowering",{sizeMultiplier:1.2,petalCountModifier:3,thicknessMultiplier:.7,leanMultiplier:.7,complexity:.75}],["vine-ivy",{sizeMultiplier:.8,heightMultiplier:1.1,thicknessMultiplier:.5,leanMultiplier:.9,complexity:.7}],["wisteria",{sizeMultiplier:1.3,heightMultiplier:1.15,petalCountModifier:5,thicknessMultiplier:.8,leanMultiplier:.6,complexity:.85}],["wisteria-cascade",{sizeMultiplier:1.4,heightMultiplier:1.25,petalCountModifier:8,thicknessMultiplier:.9,leanMultiplier:.5,complexity:.9}],["clematis",{sizeMultiplier:1.1,petalCountModifier:2,thicknessMultiplier:.6,leanMultiplier:.75,complexity:.7}],["clematis-large",{sizeMultiplier:1.4,heightMultiplier:1.1,petalCountModifier:4,thicknessMultiplier:.7,leanMultiplier:.65,complexity:.8}],["morning-glory",{sizeMultiplier:1.2,heightMultiplier:1.05,thicknessMultiplier:.55,leanMultiplier:.85,complexity:.65}],["sapling",{leanMultiplier:.1}],["sapling-oak",{sizeMultiplier:1.2,heightMultiplier:.95,petalCountModifier:2,thicknessMultiplier:1.3,leanMultiplier:.08,complexity:.6}],["sapling-maple",{sizeMultiplier:1.1,petalCountModifier:3,thicknessMultiplier:1.1,leanMultiplier:.12,complexity:.65}],["sapling-birch",{sizeMultiplier:.9,heightMultiplier:1.15,petalCountModifier:1,thicknessMultiplier:.8,leanMultiplier:.15,complexity:.55}],["tree-young",{sizeMultiplier:1.15,heightMultiplier:1.1,petalCountModifier:2,thicknessMultiplier:1.2,leanMultiplier:.1,complexity:.6}],["tree-ornamental",{sizeMultiplier:1.3,heightMultiplier:.9,petalCountModifier:5,thicknessMultiplier:1.1,leanMultiplier:.12,complexity:.75}],["birch",{sizeMultiplier:.85,heightMultiplier:1.2,thicknessMultiplier:.75,leanMultiplier:.18,complexity:.6}],["willow",{sizeMultiplier:1.2,petalCountModifier:4,leanMultiplier:.2,complexity:.7}],["willow-weeping",{sizeMultiplier:1.4,heightMultiplier:1.1,petalCountModifier:6,thicknessMultiplier:1.1,leanMultiplier:.15,complexity:.85}],["cherry-blossom",{sizeMultiplier:1.3,heightMultiplier:.95,petalCountModifier:8,leanMultiplier:.12,complexity:.9}],["palm-small",{leanMultiplier:.15,complexity:.6}],["palm-fan",{sizeMultiplier:1.3,heightMultiplier:.9,petalCountModifier:3,thicknessMultiplier:1.2,leanMultiplier:.1,complexity:.7}],["bird-of-paradise",{sizeMultiplier:1.1,thicknessMultiplier:.9,leanMultiplier:.2,complexity:.8}],["bird-of-paradise-tall",{heightMultiplier:1.2,petalCountModifier:1,thicknessMultiplier:.85,leanMultiplier:.18,complexity:.85}],["banana",{sizeMultiplier:1.4,heightMultiplier:1.1,petalCountModifier:2,thicknessMultiplier:1.4,leanMultiplier:.12,complexity:.65}],["banana-small",{sizeMultiplier:1.1,heightMultiplier:.85,petalCountModifier:1,thicknessMultiplier:1.2,leanMultiplier:.15,complexity:.6}],["pine",{thicknessMultiplier:1.2,leanMultiplier:.05,complexity:.6}],["pine-young",{sizeMultiplier:.8,heightMultiplier:.85,petalCountModifier:-1,leanMultiplier:.08}],["cypress",{sizeMultiplier:.7,heightMultiplier:1.15,thicknessMultiplier:.9,leanMultiplier:.03,complexity:.55}],["cypress-tall",{sizeMultiplier:.6,heightMultiplier:1.3,thicknessMultiplier:.85,leanMultiplier:.02,complexity:.6}],["juniper",{sizeMultiplier:1.1,heightMultiplier:.9,petalCountModifier:1,thicknessMultiplier:1.1,leanMultiplier:.1,complexity:.55}],["juniper-tall",{sizeMultiplier:.9,heightMultiplier:1.1,leanMultiplier:.07,complexity:.6}]]);function V(t){let e=It.get(t);return e?{...xe,...e}:xe}var He={"simple-flower":0,tulip:1,daisy:2,wildflower:3,grass:4,fern:5,bush:6,rose:7,lily:8,orchid:9,succulent:10,herb:11,specialty:12,"tall-flower":13,"giant-grass":14,climber:15,"small-tree":16,tropical:17,conifer:18},Fe=Object.keys(He);function Ot(t){if(!t||t.length===0)return null;let e=new Set;for(let i of t){let r=He[i.toLowerCase()];r!==void 0&&e.add(r)}return e.size>0?e:null}var Ht=[{category:0,weight:.15},{category:1,weight:.1},{category:2,weight:.1},{category:3,weight:.1},{category:4,weight:.12},{category:5,weight:.08},{category:6,weight:.08},{category:7,weight:.06},{category:8,weight:.05},{category:9,weight:.04},{category:10,weight:.04},{category:11,weight:.04},{category:12,weight:.04},{category:13,weight:.06},{category:14,weight:.05},{category:15,weight:.04},{category:16,weight:.04},{category:17,weight:.03},{category:18,weight:.03}],ze={0:["simple-flower","simple-flower-small","simple-flower-large","simple-flower-tall","simple-flower-short","simple-flower-wide","simple-flower-narrow","simple-flower-double","simple-flower-clustered","simple-flower-spiral"],1:["tulip","tulip-tall","tulip-short","tulip-double","tulip-fringed","tulip-parrot","tulip-lily","tulip-rembrandt","tulip-darwin","tulip-triumph"],2:["daisy","daisy-small","daisy-large","daisy-double","daisy-gerbera","daisy-shasta","daisy-african","daisy-oxeye","daisy-painted","daisy-marguerite"],3:["wildflower","wildflower-clustered","wildflower-scattered","wildflower-tall","wildflower-meadow","wildflower-prairie","wildflower-alpine","wildflower-woodland","wildflower-coastal","wildflower-desert"],4:["grass","grass-tall","grass-short","grass-wispy","grass-thick","grass-pampas","grass-fountain","grass-blue","grass-feather","grass-reed"],5:["fern","fern-small","fern-large","fern-curly","fern-straight","fern-maidenhair","fern-boston","fern-staghorn","fern-bird","fern-tree"],6:["bush","bush-small","bush-large","bush-flowering","bush-berry","bush-round","bush-spreading","bush-compact","bush-wild","bush-ornamental"],7:["rose","rose-climbing","rose-miniature","rose-wild","rose-double"],8:["lily","lily-tiger","lily-calla","lily-daylily","lily-stargazer"],9:["orchid","orchid-moth","orchid-dendrobium","orchid-cattleya","orchid-vanda"],10:["succulent","succulent-rosette","succulent-spiky","succulent-trailing","succulent-flowering"],11:["lavender","lavender-tall","sage","thyme","rosemary"],12:["poppy","sunflower","iris","peony","hydrangea","dahlia"],13:["hollyhock","hollyhock-double","delphinium","delphinium-tall","foxglove","foxglove-tall","gladiolus","lupine"],14:["bamboo","bamboo-tall","bamboo-clump","giant-reed","elephant-grass","miscanthus","miscanthus-tall","cortaderia"],15:["vine","vine-flowering","vine-ivy","wisteria","wisteria-cascade","clematis","clematis-large","morning-glory"],16:["sapling","sapling-oak","sapling-maple","sapling-birch","tree-young","tree-ornamental","birch","willow","willow-weeping","cherry-blossom"],17:["palm-small","palm-fan","bird-of-paradise","bird-of-paradise-tall","banana","banana-small"],18:["pine","pine-young","cypress","cypress-tall","juniper","juniper-tall"]},Be={0:[.1,.22],1:[.12,.22],2:[.1,.2],3:[.08,.18],4:[.03,.1],5:[.06,.14],6:[.08,.16],7:[.12,.25],8:[.14,.26],9:[.1,.2],10:[.04,.1],11:[.06,.14],12:[.12,.28],13:[.3,.5],14:[.4,.7],15:[.5,.9],16:[.6,1],17:[.5,.85],18:[.55,1]},ie=new Map;for(let[t,e]of Object.entries(ze))for(let i of e)ie.set(i,Number(t));var zt=new Set([13,14,15,16,17,18]);function Bt(t,e,i){let r=Ht.filter(({category:h})=>{let[u]=Be[h];return!(u>e||i&&!i.has(h))});if(r.length===0)return i?.values().next().value??0;let n=1+Math.max(0,(e-.35)/.65)*3,s=0,o=r.map(({category:h,weight:u})=>{let m=zt.has(h)?u*n:u;return s+=m,{category:h,weight:m}}),l=t()*s,a=0;for(let{category:h,weight:u}of o)if(a+=u,l<a)return h;return r[0].category}function Wt(t,e,i){let r=Bt(t,e,i),n=ze[r];return n[Math.floor(t()*n.length)]}function Vt(t,e){let i=ie.get(t)??0,[r,n]=Be[i];return[r,Math.min(n,e)]}function Nt(t,e,i,r){let n=e-t;if(i>.5&&e>.4){let s=(i-.5)/.5,o=Math.pow(r(),1-s*.5);return t+n*o}return t+n*r()}function Y(t){let{duration:e,generations:i,maxHeight:r,density:n,seed:s,colors:o,timingCurve:l,categories:a}=t,[h,u]=Le[n],m=Ot(a),p=Ie(o),d=Oe(o),g=(h+u)/2,b=Math.ceil(i*g*1.1),M=[];M.length=b;let C=0,w=0;for(let f=0;f<i;f++){let x=Ce(f,i,l),_=Ce(f+1,i,l),v=x*e,L=(_-x)*e,me=I(s+f*1e3),Z=Math.floor(ee(h,u+1,me));for(let H=0;H<Z;H++){let E=I(s+f*1e3+H*100),N=Wt(E,r,m),pe=E(),[de,ot]=Vt(N,r),at=Nt(de,ot,r,E),ut=Math.floor(E()*p.length),ht=Math.floor(E()*d.leaves.length),ct=Math.floor(E()*d.stems.length),mt=v+E()*L*.5,pt=L*ee(.6,1,E),dt=5+Math.floor(E()*4),ft=(E()-.5)*.3,gt=ee(.7,1.2,E),bt=ie.get(N)??0,Mt=V(N);M[w++]={id:C++,type:N,x:pe,maxHeight:at,flowerColor:p[ut],stemColor:d.stems[ct],leafColor:d.leaves[ht],delay:mt,growDuration:pt,seed:s+f*1e3+H*100,petals:dt,lean:ft,scale:gt,generation:f,category:bt,variation:Mt}}}return M.length=w,M.sort((f,x)=>f.maxHeight-x.maxHeight),M}function Ee(t,e,i,r){let n=i/r,s=Math.floor(t/n),o=Math.floor(e/n);return o>s&&o<=r?s+1:null}function U(t){return ie.get(t)??0}function Yt(t,e,i){let r=(t-e)/i;return r<=0?null:{progress:r,stem:Math.min(1,r*1.5),leaf:Math.max(0,Math.min(1,(r-.3)*2)),flower:Math.max(0,Math.min(1,(r-.5)*2))}}function z(t,e,i,r,n){let s=Yt(r,t.delay,t.growDuration);return s?{x:t.x*e,baseY:i,plantHeight:t.maxHeight*i*n.heightMultiplier,phases:s}:null}function O(t,e,i,r,n,s,o,l){if(l<=0)return null;let a=r*Math.min(1,l);t.beginPath(),t.moveTo(e,i);let h=e+o*a*.3,u=i-a*.4,m=e+o*a*.6,p=i-a*.7,d=e+o*a,g=i-a;return t.bezierCurveTo(h,u,m,p,d,g),t.strokeStyle=s,t.lineWidth=n,t.lineCap="round",t.stroke(),{x:d,y:g}}function F(t,e,i,r,n,s){n<1||(t.save(),t.translate(e,i),t.rotate(r),t.beginPath(),t.moveTo(0,0),t.bezierCurveTo(n*.3,-n*.15,n*.7,-n*.15,n,0),t.bezierCurveTo(n*.7,n*.15,n*.3,n*.15,0,0),t.fillStyle=s,t.fill(),t.restore())}function K(t,e,i,r,n,s,o,l){if(o<=0)return;let a=r*o*l.sizeMultiplier,h=Math.max(3,s+l.petalCountModifier);for(let u=0;u<h;u++){let m=u/h*Math.PI*2;t.save(),t.translate(e,i),t.rotate(m),t.beginPath(),t.ellipse(a*.5,0,a*.5,a*.25,0,0,Math.PI*2),t.fillStyle=n,t.fill(),t.restore()}t.beginPath(),t.arc(e,i,a*.25,0,Math.PI*2),t.fillStyle="#FFD700",t.fill()}function Ut(t,e,i,r,n,s,o){if(s<=0)return;let l=r*s*o.sizeMultiplier;t.beginPath(),t.moveTo(e-l*.3,i),t.bezierCurveTo(e-l*.4,i-l*.5,e-l*.2,i-l*.9,e,i-l),t.bezierCurveTo(e+l*.2,i-l*.9,e+l*.4,i-l*.5,e+l*.3,i),t.bezierCurveTo(e+l*.1,i-l*.2,e-l*.1,i-l*.2,e-l*.3,i),t.fillStyle=n,t.fill(),o.complexity>.6&&(t.globalAlpha=.3,t.beginPath(),t.moveTo(e,i-l*.2),t.lineTo(e,i-l*.9),t.strokeStyle="#FFFFFF",t.lineWidth=l*.08,t.stroke(),t.globalAlpha=1)}function Kt(t,e,i,r,n,s,o){if(s<=0)return;let l=r*s*o.sizeMultiplier,a=Math.max(8,12+o.petalCountModifier);for(let h=0;h<a;h++){let u=h/a*Math.PI*2;t.save(),t.translate(e,i),t.rotate(u),t.beginPath(),t.ellipse(l*.45,0,l*.4,l*.12,0,0,Math.PI*2),t.fillStyle=n,t.fill(),t.restore()}t.beginPath(),t.arc(e,i,l*.22,0,Math.PI*2),t.fillStyle="#FFD700",t.fill()}function qt(t,e,i,r,n,s,o){if(s<=0)return;let l=r*s*o.sizeMultiplier,a=Math.max(3,5+o.petalCountModifier);for(let h=0;h<a;h++){let u=h/a*Math.PI*2+.3,m=l*.3,p=e+Math.cos(u)*m,d=i+Math.sin(u)*m;t.beginPath(),t.arc(p,d,l*.18,0,Math.PI*2),t.fillStyle=n,t.fill()}t.beginPath(),t.arc(e,i,l*.15,0,Math.PI*2),t.fillStyle=n,t.fill()}function Xt(t,e,i,r,n,s,o,l){if(o<=0)return;let a=r*Math.min(1,o)*l.heightMultiplier,h=1.5*l.thicknessMultiplier,u=Math.max(2,3+Math.floor(D(s)*3)+l.petalCountModifier);for(let m=0;m<u;m++){let p=D(s+m*10),d=(p-.5)*.4*l.leanMultiplier,g=a*(.6+p*.4);t.beginPath(),t.moveTo(e+(m-u/2)*3,i),t.quadraticCurveTo(e+(m-u/2)*3+d*g,i-g*.6,e+(m-u/2)*3+d*g*1.5,i-g),t.strokeStyle=n,t.lineWidth=h,t.lineCap="round",t.stroke()}if(l.complexity>.7&&o>.8){let m=(o-.8)/.2;t.globalAlpha=m*.7;for(let p=0;p<u;p++){let d=D(s+p*10),g=(d-.5)*.4*l.leanMultiplier,b=a*(.6+d*.4),M=e+(p-u/2)*3+g*b*1.5,C=i-b;t.beginPath(),t.ellipse(M,C-a*.1,a*.08,a*.15,0,0,Math.PI*2),t.fillStyle="#F5F5DC",t.fill()}t.globalAlpha=1}}function $t(t,e,i,r,n,s,o,l){if(o<=0)return;let a=r*Math.min(1,o)*l.heightMultiplier,h=(D(s)-.5)*.3*l.leanMultiplier,u=1.5*l.thicknessMultiplier;t.beginPath(),t.moveTo(e,i),t.quadraticCurveTo(e+h*a*.5,i-a*.5,e+h*a,i-a),t.strokeStyle=n,t.lineWidth=u,t.stroke();let m=Math.max(4,6+l.petalCountModifier);for(let p=0;p<m;p++){let d=(p+1)/(m+1),g=e+h*a*d,b=i-a*d,M=p%2===0?1:-1,C=a*.25*(1-d*.5),w=l.complexity>.7?.5:.2;t.beginPath(),t.moveTo(g,b),t.quadraticCurveTo(g+M*C*.7,b-C*w,g+M*C,b+C*w),t.strokeStyle=n,t.lineWidth=1,t.stroke()}}function Zt(t,e,i,r,n,s,o,l,a){if(l<=0)return;let h=r*Math.min(1,l)*a.sizeMultiplier,u=Math.max(5,8+a.petalCountModifier);for(let p=0;p<u;p++){let d=D(o+p*7),g=p/u*Math.PI*2+d*.5,b=h*(.3+d*.4),M=e+Math.cos(g)*b*a.leanMultiplier,C=i-h*.3+Math.sin(g)*b*.5;F(t,M,C,g+Math.PI,h*.4,n)}let m=a.complexity>.8?.5:.7;if(l>m){let p=(l-m)/(1-m),d=a.complexity>.8?5:3;for(let g=0;g<d;g++){let b=D(o+g*13),M=e+(b-.5)*h*.6,C=i-h*.3-b*h*.3;t.beginPath(),t.arc(M,C,h*.12*p,0,Math.PI*2),t.fillStyle=s,t.fill()}}}function jt(t,e,i,r,n,s,o){if(s<=0)return;let l=r*s*o.sizeMultiplier,a=o.complexity>.8?4:3;for(let h=0;h<a;h++){let u=l*(1-h*.2),m=5+h,p=h*.3;for(let d=0;d<m;d++){let g=d/m*Math.PI*2+p;t.save(),t.translate(e,i),t.rotate(g),t.beginPath(),t.ellipse(u*.35,0,u*.4,u*.25,0,0,Math.PI*2),t.fillStyle=n,t.fill(),t.restore()}}t.beginPath(),t.arc(e,i,l*.15,0,Math.PI*2),t.fillStyle="#FFD700",t.fill()}function Jt(t,e,i,r,n,s,o){if(s<=0)return;let l=r*s*o.sizeMultiplier,a=Math.max(4,6+o.petalCountModifier);for(let h=0;h<a;h++){let u=h/a*Math.PI*2;t.save(),t.translate(e,i),t.rotate(u),t.beginPath(),t.moveTo(0,0),t.bezierCurveTo(l*.2,-l*.3,l*.6,-l*.2,l*.8,0),t.bezierCurveTo(l*.6,l*.15,l*.2,l*.1,0,0),t.fillStyle=n,t.fill(),t.restore()}t.beginPath(),t.arc(e,i,l*.12,0,Math.PI*2),t.fillStyle="#8B4513",t.fill()}function Qt(t,e,i,r,n,s,o){if(s<=0)return;let l=r*s*o.sizeMultiplier;for(let a=0;a<3;a++){let h=a/3*Math.PI*2-Math.PI/2;t.save(),t.translate(e,i),t.rotate(h),t.beginPath(),t.ellipse(l*.5,0,l*.5,l*.15,0,0,Math.PI*2),t.fillStyle=n,t.fill(),t.restore()}for(let a=0;a<2;a++){let h=(a===0?-.4:.4)+Math.PI/2;t.save(),t.translate(e,i),t.rotate(h),t.beginPath(),t.ellipse(l*.35,0,l*.35,l*.2,0,0,Math.PI*2),t.fillStyle=n,t.fill(),t.restore()}t.beginPath(),t.ellipse(e,i+l*.3,l*.25,l*.15,0,0,Math.PI*2),t.fillStyle="#FFD700",t.fill()}function ei(t,e,i,r,n,s,o){if(s<=0)return;let l=r*s*o.sizeMultiplier,a=o.complexity>.6?4:3,h=6+o.petalCountModifier;for(let u=0;u<a;u++){let m=l*(1-u*.2),p=u*.5;for(let d=0;d<h;d++){let g=d/h*Math.PI*2+p,b=e+Math.cos(g)*m*.4,M=i-u*l*.1+Math.sin(g)*m*.2;t.beginPath(),t.ellipse(b,M,m*.2,m*.35,g,0,Math.PI*2),t.fillStyle=n,t.fill()}}}function ti(t,e,i,r,n,s,o,l){if(o<=0)return;let a=r*Math.min(1,o)*l.heightMultiplier,h=(D(s)-.5)*.2*l.leanMultiplier;if(t.beginPath(),t.moveTo(e,i),t.quadraticCurveTo(e+h*a*.5,i-a*.5,e+h*a,i-a),t.strokeStyle="#4A7C40",t.lineWidth=1.5*l.thicknessMultiplier,t.stroke(),o>.5){let u=(o-.5)/.5,m=a*.3*u,p=i-a+m/2,d=e+h*a,g=Math.floor(8*u);for(let b=0;b<g;b++){let M=p-b/g*m,C=d+(D(s+b)-.5)*4;t.beginPath(),t.arc(C,M,2.5,0,Math.PI*2),t.fillStyle=n,t.fill()}}}function ii(t,e,i,r,n,s,o){if(s<=0)return;let l=r*s*o.sizeMultiplier;for(let a=0;a<4;a++){let h=a/4*Math.PI*2+Math.PI/4;t.save(),t.translate(e,i),t.rotate(h),t.beginPath(),t.moveTo(0,0),t.bezierCurveTo(l*.2,-l*.3,l*.5,-l*.2,l*.6,0),t.bezierCurveTo(l*.5,l*.2,l*.2,l*.3,0,0),t.fillStyle=n,t.fill(),t.restore()}t.beginPath(),t.arc(e,i,l*.2,0,Math.PI*2),t.fillStyle="#2D2D2D",t.fill()}function ri(t,e,i,r,n,s,o){if(s<=0)return;let l=r*s*o.sizeMultiplier,a=16+o.petalCountModifier;for(let h=0;h<a;h++){let u=h/a*Math.PI*2;t.save(),t.translate(e,i),t.rotate(u),t.beginPath(),t.moveTo(l*.3,0),t.bezierCurveTo(l*.4,-l*.08,l*.7,-l*.05,l*.85,0),t.bezierCurveTo(l*.7,l*.05,l*.4,l*.08,l*.3,0),t.fillStyle=n,t.fill(),t.restore()}t.beginPath(),t.arc(e,i,l*.35,0,Math.PI*2),t.fillStyle="#4A3728",t.fill(),t.beginPath(),t.arc(e,i,l*.25,0,Math.PI*2),t.fillStyle="#3D2D20",t.fill()}function ni(t,e,i,r,n,s,o){if(s<=0)return;let l=r*s*o.sizeMultiplier;for(let a=0;a<3;a++){let h=a/3*Math.PI*2;t.save(),t.translate(e,i),t.rotate(h),t.beginPath(),t.moveTo(0,0),t.bezierCurveTo(l*.1,-l*.4,l*.2,-l*.6,0,-l*.7),t.bezierCurveTo(-l*.2,-l*.6,-l*.1,-l*.4,0,0),t.fillStyle=n,t.fill(),t.restore()}for(let a=0;a<3;a++){let h=a/3*Math.PI*2+Math.PI/3;t.save(),t.translate(e,i),t.rotate(h),t.beginPath(),t.moveTo(0,0),t.bezierCurveTo(l*.3,l*.2,l*.4,l*.5,l*.2,l*.6),t.bezierCurveTo(0,l*.5,-l*.1,l*.2,0,0),t.fillStyle=n,t.fill(),t.restore()}}function si(t,e,i,r,n,s,o){if(s<=0)return;let l=r*s*o.sizeMultiplier,a=5;for(let h=0;h<a;h++){let u=l*(1-h*.15),m=8+h*2,p=h*.4;for(let d=0;d<m;d++){let g=d/m*Math.PI*2+p;t.save(),t.translate(e,i),t.rotate(g),t.beginPath(),t.ellipse(u*.3,0,u*.35,u*.2,0,0,Math.PI*2),t.fillStyle=n,t.fill(),t.restore()}}t.beginPath(),t.arc(e,i,l*.12,0,Math.PI*2),t.fillStyle="#FFD700",t.fill()}function li(t,e,i,r,n,s,o,l){if(o<=0)return;let a=r*o*l.sizeMultiplier,h=20+l.petalCountModifier;for(let u=0;u<h;u++){let m=D(s+u*7),p=D(s+u*11),d=m*Math.PI*2,g=p*a*.4,b=e+Math.cos(d)*g,M=i+Math.sin(d)*g*.6-a*.1;for(let C=0;C<4;C++){let w=C/4*Math.PI*2;t.beginPath(),t.ellipse(b+Math.cos(w)*a*.06,M+Math.sin(w)*a*.06,a*.05,a*.03,w,0,Math.PI*2),t.fillStyle=n,t.fill()}}}function oi(t,e,i,r,n,s,o){if(s<=0)return;let l=r*s*o.sizeMultiplier,a=4;for(let h=0;h<a;h++){let u=l*(1-h*.18),m=10+h*2+o.petalCountModifier,p=h*.25;for(let d=0;d<m;d++){let g=d/m*Math.PI*2+p;t.save(),t.translate(e,i),t.rotate(g),t.beginPath(),t.moveTo(0,0),t.bezierCurveTo(u*.15,-u*.08,u*.35,-u*.05,u*.45,0),t.bezierCurveTo(u*.35,u*.05,u*.15,u*.08,0,0),t.fillStyle=n,t.fill(),t.restore()}}t.beginPath(),t.arc(e,i,l*.08,0,Math.PI*2),t.fillStyle="#DAA520",t.fill()}var ai={0:(t,e,i,r,n,s)=>{let o=z(e,i,r,n,s);if(!o)return;let{x:l,baseY:a,plantHeight:h,phases:u}=o,m=O(t,l,a,h,2*e.scale*s.thicknessMultiplier,e.stemColor,e.lean*s.leanMultiplier,u.stem);if(m&&u.leaf>0){let p=a-h*.4*u.stem,d=l+e.lean*s.leanMultiplier*h*.4;F(t,d-3,p,-.5-e.lean,15*e.scale*u.leaf,e.leafColor),F(t,d+3,p+5,.5-e.lean,12*e.scale*u.leaf,e.leafColor)}m&&u.flower>0&&K(t,m.x,m.y,18*e.scale,e.flowerColor,e.petals,u.flower,s)},1:(t,e,i,r,n,s)=>{let o=z(e,i,r,n,s);if(!o)return;let{x:l,baseY:a,plantHeight:h,phases:u}=o,m=O(t,l,a,h,2.5*e.scale*s.thicknessMultiplier,e.stemColor,e.lean*.5*s.leanMultiplier,u.stem);if(m&&u.leaf>0){let p=a-h*.2*u.stem;F(t,l-2,p,-.8,25*e.scale*u.leaf,e.leafColor),F(t,l+2,p,.8,22*e.scale*u.leaf,e.leafColor)}m&&u.flower>0&&Ut(t,m.x,m.y,22*e.scale,e.flowerColor,u.flower,s)},2:(t,e,i,r,n,s)=>{let o=z(e,i,r,n,s);if(!o)return;let{x:l,baseY:a,plantHeight:h,phases:u}=o,m=O(t,l,a,h,1.5*e.scale*s.thicknessMultiplier,e.stemColor,e.lean*s.leanMultiplier,u.stem);if(m&&u.leaf>0){let p=a-h*.3*u.stem,d=l+e.lean*s.leanMultiplier*h*.3;F(t,d,p,-.3,12*e.scale*u.leaf,e.leafColor)}m&&u.flower>0&&Kt(t,m.x,m.y,16*e.scale,e.flowerColor,u.flower,s)},3:(t,e,i,r,n,s)=>{let o=z(e,i,r,n,s);if(!o)return;let{x:l,baseY:a,plantHeight:h,phases:u}=o,m=O(t,l,a,h*.85,1.5*e.scale*s.thicknessMultiplier,e.stemColor,e.lean*s.leanMultiplier,u.stem);m&&u.flower>0&&qt(t,m.x,m.y,14*e.scale,e.flowerColor,u.flower,s)},4:(t,e,i,r,n,s)=>{let o=(n-e.delay)/e.growDuration;if(o<=0)return;let l=e.x*i,a=r,h=e.maxHeight*r,u=Math.min(1,o*1.5);Xt(t,l,a,h,e.leafColor,e.seed,u,s)},5:(t,e,i,r,n,s)=>{let o=(n-e.delay)/e.growDuration;if(o<=0)return;let l=e.x*i,a=r,h=e.maxHeight*r,u=Math.min(1,o*1.5);$t(t,l,a,h,e.leafColor,e.seed,u,s)},6:(t,e,i,r,n,s)=>{let o=(n-e.delay)/e.growDuration;if(o<=0)return;let l=e.x*i,a=r,h=e.maxHeight*r;Zt(t,l,a-5,h*.7,e.leafColor,e.flowerColor,e.seed,Math.min(1,o*1.2),s)},7:(t,e,i,r,n,s)=>{let o=z(e,i,r,n,s);if(!o)return;let{x:l,baseY:a,plantHeight:h,phases:u}=o,m=O(t,l,a,h,2.5*e.scale*s.thicknessMultiplier,e.stemColor,e.lean*s.leanMultiplier,u.stem);if(m&&u.leaf>0){let p=a-h*.4*u.stem;F(t,l-4,p,-.6,18*e.scale*u.leaf,e.leafColor),F(t,l+4,p+8,.6,16*e.scale*u.leaf,e.leafColor)}m&&u.flower>0&&jt(t,m.x,m.y,20*e.scale,e.flowerColor,u.flower,s)},8:(t,e,i,r,n,s)=>{let o=z(e,i,r,n,s);if(!o)return;let{x:l,baseY:a,plantHeight:h,phases:u}=o,m=O(t,l,a,h,2*e.scale*s.thicknessMultiplier,e.stemColor,e.lean*s.leanMultiplier,u.stem);if(m&&u.leaf>0){let p=a-h*.3*u.stem;F(t,l-2,p,-.4,20*e.scale*u.leaf,e.leafColor),F(t,l+2,p+10,.4,18*e.scale*u.leaf,e.leafColor)}m&&u.flower>0&&Jt(t,m.x,m.y,22*e.scale,e.flowerColor,u.flower,s)},9:(t,e,i,r,n,s)=>{let o=z(e,i,r,n,s);if(!o)return;let{x:l,baseY:a,plantHeight:h,phases:u}=o,m=O(t,l,a,h,1.5*e.scale*s.thicknessMultiplier,e.stemColor,e.lean*s.leanMultiplier,u.stem);m&&u.flower>0&&Qt(t,m.x,m.y,18*e.scale,e.flowerColor,u.flower,s)},10:(t,e,i,r,n,s)=>{let o=(n-e.delay)/e.growDuration;if(o<=0)return;let l=e.x*i,a=r,h=e.maxHeight*r;ei(t,l,a-5,h*.6,e.leafColor,Math.min(1,o*1.2),s)},11:(t,e,i,r,n,s)=>{let o=(n-e.delay)/e.growDuration;if(o<=0)return;let l=e.x*i,a=r,h=e.maxHeight*r;ti(t,l,a,h,e.flowerColor,e.seed,Math.min(1,o*1.3),s)},12:(t,e,i,r,n,s)=>{let o=z(e,i,r,n,s);if(!o)return;let{x:l,baseY:a,plantHeight:h,phases:u}=o,m=O(t,l,a,h,2.5*e.scale*s.thicknessMultiplier,e.stemColor,e.lean*s.leanMultiplier,u.stem);if(m&&u.leaf>0){let p=a-h*.35*u.stem;F(t,l-3,p,-.5,16*e.scale*u.leaf,e.leafColor),F(t,l+3,p+6,.5,14*e.scale*u.leaf,e.leafColor)}if(m&&u.flower>0)switch(e.type){case"poppy":ii(t,m.x,m.y,18*e.scale,e.flowerColor,u.flower,s);break;case"sunflower":ri(t,m.x,m.y,25*e.scale,e.flowerColor,u.flower,s);break;case"iris":ni(t,m.x,m.y,20*e.scale,e.flowerColor,u.flower,s);break;case"peony":si(t,m.x,m.y,22*e.scale,e.flowerColor,u.flower,s);break;case"hydrangea":li(t,m.x,m.y,28*e.scale,e.flowerColor,e.seed,u.flower,s);break;case"dahlia":oi(t,m.x,m.y,24*e.scale,e.flowerColor,u.flower,s);break;default:K(t,m.x,m.y,18*e.scale,e.flowerColor,e.petals,u.flower,s)}},13:(t,e,i,r,n,s)=>{let o=z(e,i,r,n,s);if(!o)return;let{x:l,baseY:a,plantHeight:h,phases:u}=o,m=O(t,l,a,h,3*e.scale*s.thicknessMultiplier,e.stemColor,e.lean*s.leanMultiplier*.5,u.stem);if(u.leaf>0){let p=3+Math.floor(s.complexity*3);for(let d=0;d<p;d++){let g=.2+d/p*.5,b=a-h*g*u.stem,M=l+e.lean*s.leanMultiplier*h*g*.5,C=d%2===0?-1:1;F(t,M,b,C*.6,20*e.scale*u.leaf,e.leafColor)}}if(m&&u.flower>0){let p=4+Math.floor(s.complexity*4);for(let d=0;d<p;d++){let g=.5+d/p*.45,b=a-h*g*u.stem,M=l+e.lean*s.leanMultiplier*h*g*.5,C=(8+d*1.5)*e.scale*s.sizeMultiplier,w=Math.max(0,(u.flower-d*.08)*1.5);w>0&&K(t,M,b,C,e.flowerColor,e.petals,Math.min(1,w),s)}}},14:(t,e,i,r,n,s)=>{let o=(n-e.delay)/e.growDuration;if(o<=0)return;let l=e.x*i,a=r,h=e.maxHeight*r*s.heightMultiplier,u=Math.min(1,o*1.3),m=2+Math.floor(s.complexity*3),p=I(e.seed);for(let d=0;d<m;d++){let g=(p()-.5)*20*s.sizeMultiplier,b=h*(.7+p()*.3)*u,M=(p()-.5)*.15*s.leanMultiplier,C=4+Math.floor(p()*4),w=b/C;t.strokeStyle=e.stemColor,t.lineWidth=3*e.scale*s.thicknessMultiplier,t.lineCap="round";let f=a,x=l+g;for(let _=0;_<C;_++){let v=f-w,L=x+M*w;t.beginPath(),t.moveTo(x,f),t.lineTo(L,v),t.stroke(),_<C-1&&(t.beginPath(),t.arc(L,v,4*e.scale,0,Math.PI*2),t.fillStyle=e.stemColor,t.fill()),f=v,x=L}if(u>.5){let _=(u-.5)*2;for(let v=0;v<3;v++){let L=(v-1)*.4+M;F(t,x,f,L,30*e.scale*_,e.leafColor)}}}},15:(t,e,i,r,n,s)=>{let o=(n-e.delay)/e.growDuration;if(o<=0)return;let l=e.x*i,a=r,h=e.maxHeight*r*s.heightMultiplier,u=Math.min(1,o*1.2),m=I(e.seed);t.strokeStyle=e.stemColor,t.lineWidth=2*e.scale*s.thicknessMultiplier,t.lineCap="round",t.beginPath(),t.moveTo(l,a);let p=8,d=l,g=a;for(let b=1;b<=p;b++){let M=b/p,C=a-h*M*u,w=Math.sin(M*Math.PI*3)*15*s.leanMultiplier,f=l+w+e.lean*h*M*.3;if(t.quadraticCurveTo((d+f)/2+(m()-.5)*10,(g+C)/2,f,C),M>.1&&u>M){let x=12*e.scale*Math.min(1,(u-M)*3);b%2===0?F(t,f-5,C,-.8,x,e.leafColor):F(t,f+5,C,.8,x,e.leafColor)}d=f,g=C}if(t.stroke(),u>.6&&s.complexity>.6){let b=(u-.6)*2.5,M=3+Math.floor(s.petalCountModifier);for(let C=0;C<M;C++){let w=.3+m()*.5,f=a-h*w*u,x=l+Math.sin(w*Math.PI*3)*15*s.leanMultiplier+e.lean*h*w*.3;K(t,x,f,10*e.scale,e.flowerColor,5,Math.min(1,b),s)}}},16:(t,e,i,r,n,s)=>{let o=(n-e.delay)/e.growDuration;if(o<=0)return;let l=e.x*i,a=r,h=e.maxHeight*r*s.heightMultiplier,u=Math.min(1,o*1.2),m=Math.max(0,(o-.4)*1.7),p=I(e.seed),d=h*.6*u,g=6*e.scale*s.thicknessMultiplier;if(t.fillStyle=e.stemColor,t.beginPath(),t.moveTo(l-g/2,a),t.lineTo(l+g/2,a),t.lineTo(l+g/4,a-d),t.lineTo(l-g/4,a-d),t.closePath(),t.fill(),m>0){let b=a-d,M=25*e.scale*s.sizeMultiplier*m,C=5+Math.floor(s.complexity*4);for(let w=0;w<C;w++){let f=w/C*Math.PI*2+p()*.5,x=M*(.4+p()*.6),_=l+Math.cos(f)*x*.8,v=b-Math.abs(Math.sin(f))*x*.6-M*.3,L=M*(.4+p()*.3);t.beginPath(),t.arc(_,v,L,0,Math.PI*2),t.fillStyle=e.leafColor,t.fill()}if(s.petalCountModifier>4&&m>.5){let w=Math.floor(s.petalCountModifier);for(let f=0;f<w;f++){let x=p()*Math.PI*2,_=M*(.5+p()*.5),v=l+Math.cos(x)*_*.8,L=b-Math.abs(Math.sin(x))*_*.6-M*.3;K(t,v,L,6*e.scale,e.flowerColor,5,m,s)}}}},17:(t,e,i,r,n,s)=>{let o=(n-e.delay)/e.growDuration;if(o<=0)return;let l=e.x*i,a=r,h=e.maxHeight*r*s.heightMultiplier,u=Math.min(1,o*1.2),m=I(e.seed),p=h*.5*u;if(t.strokeStyle=e.stemColor,t.lineWidth=5*e.scale*s.thicknessMultiplier,t.lineCap="round",t.beginPath(),t.moveTo(l,a),t.lineTo(l+e.lean*p*.3,a-p),t.stroke(),u>.3){let d=(u-.3)*1.4,g=5+Math.floor(s.complexity*3),b=a-p,M=l+e.lean*p*.3;for(let C=0;C<g;C++){let w=C/g*Math.PI-Math.PI/2+(m()-.5)*.3,f=35*e.scale*s.sizeMultiplier*d,x=.3+m()*.3;t.strokeStyle=e.leafColor,t.lineWidth=2*e.scale,t.beginPath(),t.moveTo(M,b);let _=M+Math.cos(w)*f,v=b+Math.sin(w)*f*.5+f*x,L=M+Math.cos(w)*f*.6,me=b+Math.sin(w)*f*.3;t.quadraticCurveTo(L,me,_,v),t.stroke();let Z=6;for(let H=1;H<Z;H++){let E=H/Z,N=M+(_-M)*E*.8,pe=b+(v-b)*E*.5+f*x*E*E,de=8*e.scale*(1-E*.5)*d;F(t,N,pe,w+(H%2===0?.5:-.5),de,e.leafColor)}}}},18:(t,e,i,r,n,s)=>{let o=(n-e.delay)/e.growDuration;if(o<=0)return;let l=e.x*i,a=r,h=e.maxHeight*r*s.heightMultiplier,u=Math.min(1,o*1.2),m=h*u,p=4*e.scale*s.thicknessMultiplier;if(t.fillStyle=e.stemColor,t.beginPath(),t.moveTo(l-p/2,a),t.lineTo(l+p/2,a),t.lineTo(l+p/4,a-m),t.lineTo(l-p/4,a-m),t.closePath(),t.fill(),u>.2){let d=(u-.2)*1.25,g=4+Math.floor(s.complexity*3),b=20*e.scale*s.sizeMultiplier;t.fillStyle=e.leafColor;for(let M=0;M<g;M++){let C=M/g,w=a-m*(.2+C*.75),f=b*(1-C*.7)*d,x=h*.15*(1-C*.3);t.beginPath(),t.moveTo(l,w-x),t.lineTo(l-f,w),t.lineTo(l+f,w),t.closePath(),t.fill()}}}};function Te(t,e,i,r,n){let s=e.category??U(e.type),o=e.variation??V(e.type),l=ai[s];l(t,e,i,r,n,o)}var q=class{constructor(e){this.resizeObserver=null;this.resizeHandler=null;this.debouncedResize=null;this.dpr=1;this.width=0;this.height=0;this.options=e,this.container=e.container,this.canvas=document.createElement("canvas"),this.canvas.style.cssText=`
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: ${e.zIndex};
      opacity: ${e.opacity};
    `,this.canvas.setAttribute("aria-hidden","true"),this.canvas.setAttribute("role","presentation");let i=this.canvas.getContext("2d");if(!i)throw new Error("Garten: Could not get 2D context");this.ctx=i,this.setupContainer(),this.container.insertBefore(this.canvas,this.container.firstChild),this.resize(),this.setupResizeObserver()}setupContainer(){window.getComputedStyle(this.container).position==="static"&&(this.container.style.position="relative")}setupResizeObserver(){this.debouncedResize=Ae(()=>this.resize(),100),typeof ResizeObserver<"u"?(this.resizeObserver=new ResizeObserver(this.debouncedResize),this.resizeObserver.observe(this.container)):(this.resizeHandler=this.debouncedResize,window.addEventListener("resize",this.resizeHandler))}resize(){this.dpr=Ge(this.options.maxPixelRatio);let e=this.container.getBoundingClientRect();this.width=e.width,this.height=e.height,this.canvas.width=this.width*this.dpr,this.canvas.height=this.height*this.dpr,this.ctx.setTransform(1,0,0,1,0,0),this.ctx.scale(this.dpr,this.dpr)}clear(){this.ctx.fillStyle="#ffffff",this.ctx.fillRect(0,0,this.width,this.height)}drawGround(){this.ctx.fillStyle="rgba(139, 119, 101, 0.08)",this.ctx.fillRect(0,this.height-8,this.width,8)}applyVerticalFade(){let{fadeHeight:e,fadeColor:i,maxHeight:r}=this.options;if(e<=0)return;let n=J(i);if(!n)return;let s=this.height*(1-r),o=s,l=Math.max(0,s-this.height*e),a=this.ctx.createLinearGradient(0,l,0,o);a.addColorStop(0,`rgba(${n.r}, ${n.g}, ${n.b}, 1)`),a.addColorStop(1,`rgba(${n.r}, ${n.g}, ${n.b}, 0)`),this.ctx.globalCompositeOperation="destination-out",this.ctx.fillStyle=a,this.ctx.fillRect(0,0,this.width,o),this.ctx.globalCompositeOperation="source-over"}render(e,i){this.clear(),this.drawGround();for(let r of e)i<r.delay||Te(this.ctx,r,this.width,this.height,i);this.applyVerticalFade()}renderStatic(e,i){let r=i*this.options.duration;this.render(e,r)}getDimensions(){return{width:this.width,height:this.height}}getCanvas(){return this.canvas}setOptions(e){this.options=e,this.canvas.style.zIndex=String(e.zIndex),this.canvas.style.opacity=String(e.opacity),this.resize()}destroy(){this.debouncedResize&&(this.debouncedResize.cancel(),this.debouncedResize=null),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}};var X=class{constructor(e){this.plants=[];this.state="idle";this.animationId=null;this.startTime=0;this.pausedAt=0;this.elapsedTime=0;this.speed=1;this.lastFrameTime=0;this.lastReportedGeneration=-1;this.tick=e=>{if(this.state!=="playing")return;if(e-this.lastFrameTime<this.frameInterval){this.animationId=requestAnimationFrame(this.tick);return}this.lastFrameTime=e;let i=this.elapsedTime;this.elapsedTime=(e-this.startTime)*this.speed/1e3;let r=Ee(i,this.elapsedTime,this.options.duration,this.options.generations);r!==null&&r>this.lastReportedGeneration&&(this.lastReportedGeneration=r,this.options.events.onGenerationComplete?.(r,this.options.generations));let n=Math.min(1,this.elapsedTime/this.options.duration);if(this.options.events.onProgress?.(n,this.elapsedTime),this.renderer.render(this.plants,this.elapsedTime),this.elapsedTime>=this.options.duration)if(this.options.loop)this.startTime=e,this.elapsedTime=0,this.lastReportedGeneration=-1;else{this.state="complete",this.emitStateChange(),this.options.events.onComplete?.();return}this.animationId=requestAnimationFrame(this.tick)};if(this.options=ge(e),this.speed=this.options.speed,this.frameInterval=1e3/this.options.targetFPS,this.options.respectReducedMotion&&ke()){this.handleReducedMotion();return}this.renderer=new q(this.options),this.plants=Y(this.options),this.options.autoplay&&this.play()}handleReducedMotion(){this.renderer=new q(this.options),this.plants=Y(this.options),this.renderer.renderStatic(this.plants,1),this.state="complete",this.emitStateChange()}emitStateChange(){this.options.events.onStateChange?.(this.state)}play(){this.state!=="playing"&&(this.state==="paused"?this.startTime=performance.now()-this.pausedAt*1e3/this.speed:(this.startTime=performance.now(),this.elapsedTime=0,this.lastReportedGeneration=-1),this.state="playing",this.emitStateChange(),this.lastFrameTime=performance.now(),this.animationId=requestAnimationFrame(this.tick))}pause(){this.state==="playing"&&(this.animationId!==null&&(cancelAnimationFrame(this.animationId),this.animationId=null),this.pausedAt=this.elapsedTime,this.state="paused",this.emitStateChange())}stop(){this.animationId!==null&&(cancelAnimationFrame(this.animationId),this.animationId=null),this.elapsedTime=0,this.pausedAt=0,this.lastReportedGeneration=-1,this.state="idle",this.emitStateChange(),this.renderer.render(this.plants,0)}seek(e){let i=Math.max(0,Math.min(e,this.options.duration));this.state==="playing"?this.startTime=performance.now()-i*1e3/this.speed:this.pausedAt=i,this.elapsedTime=i;let r=Math.floor(i/(this.options.duration/this.options.generations));this.lastReportedGeneration=r-1,this.renderer.render(this.plants,i)}setSpeed(e){if(e<=0)throw new Error("Garten: Speed must be positive");let i=this.state==="playing";i&&this.pause(),this.speed=e,i&&this.play()}getState(){return this.state}getProgress(){return Math.min(1,this.elapsedTime/this.options.duration)}getElapsedTime(){return this.elapsedTime}setOptions(e){let i=e.generations!==void 0||e.density!==void 0||e.maxHeight!==void 0||e.colors!==void 0||e.seed!==void 0;this.options=ge({container:this.options.container,...e}),this.renderer.setOptions(this.options),i&&this.regenerate(),e.speed!==void 0&&this.setSpeed(e.speed)}regenerate(){let e=this.state==="playing";e&&this.pause(),this.plants=Y(this.options),this.renderer.render(this.plants,this.elapsedTime),e&&this.play()}destroy(){this.animationId!==null&&(cancelAnimationFrame(this.animationId),this.animationId=null),this.renderer.destroy(),this.plants=[],this.state="idle"}};var S=class S{constructor(e,i,r,n=1){this._hexCache=null;this._r=Math.round(Math.max(0,Math.min(255,e))),this._g=Math.round(Math.max(0,Math.min(255,i))),this._b=Math.round(Math.max(0,Math.min(255,r))),this._a=Math.max(0,Math.min(1,n))}get r(){return this._r}get g(){return this._g}get b(){return this._b}get a(){return this._a}get rgb(){return{r:this._r,g:this._g,b:this._b}}static fromHex(e){let i=e.replace("#",""),r,n,s,o=255;if(i.length===3)r=parseInt(i[0]+i[0],16),n=parseInt(i[1]+i[1],16),s=parseInt(i[2]+i[2],16);else if(i.length===6)r=parseInt(i.substring(0,2),16),n=parseInt(i.substring(2,4),16),s=parseInt(i.substring(4,6),16);else if(i.length===8)r=parseInt(i.substring(0,2),16),n=parseInt(i.substring(2,4),16),s=parseInt(i.substring(4,6),16),o=parseInt(i.substring(6,8),16);else return null;return isNaN(r)||isNaN(n)||isNaN(s)||isNaN(o)?null:new S(r,n,s,o/255)}static fromRGB(e,i=1){return new S(e.r,e.g,e.b,i)}static fromHSL(e,i,r,n=1){let s=i/100,o=r/100,l=(1-Math.abs(2*o-1))*s,a=l*(1-Math.abs(e/60%2-1)),h=o-l/2,u=0,m=0,p=0;return e<60?(u=l,m=a,p=0):e<120?(u=a,m=l,p=0):e<180?(u=0,m=l,p=a):e<240?(u=0,m=a,p=l):e<300?(u=a,m=0,p=l):(u=l,m=0,p=a),new S((u+h)*255,(m+h)*255,(p+h)*255,n)}static parse(e){if(e=e.trim().toLowerCase(),e.startsWith("#"))return S.fromHex(e);let i=e.match(/rgba?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*([\d.]+))?\s*\)/);if(i)return new S(parseInt(i[1]),parseInt(i[2]),parseInt(i[3]),i[4]?parseFloat(i[4]):1);let r=e.match(/hsla?\s*\(\s*(\d+)\s*,\s*(\d+)%?\s*,\s*(\d+)%?\s*(?:,\s*([\d.]+))?\s*\)/);return r?S.fromHSL(parseInt(r[1]),parseInt(r[2]),parseInt(r[3]),r[4]?parseFloat(r[4]):1):null}toHex(e=!1){if(!e&&this._hexCache)return this._hexCache;let i="#"+this._r.toString(16).padStart(2,"0")+this._g.toString(16).padStart(2,"0")+this._b.toString(16).padStart(2,"0")+(e?Math.round(this._a*255).toString(16).padStart(2,"0"):"");return e||(this._hexCache=i),i}toRGBString(e=!1){return this._a<1||e?`rgba(${this._r}, ${this._g}, ${this._b}, ${this._a})`:`rgb(${this._r}, ${this._g}, ${this._b})`}toHSL(){let e=this._r/255,i=this._g/255,r=this._b/255,n=Math.max(e,i,r),s=Math.min(e,i,r),o=(n+s)/2;if(n===s)return{h:0,s:0,l:o*100};let l=n-s,a=o>.5?l/(2-n-s):l/(n+s),h=0;return n===e?h=((i-r)/l+(i<r?6:0))/6:n===i?h=((r-e)/l+2)/6:h=((e-i)/l+4)/6,{h:h*360,s:a*100,l:o*100}}lighten(e){return new S(this._r+(255-this._r)*e,this._g+(255-this._g)*e,this._b+(255-this._b)*e,this._a)}darken(e){return new S(this._r*(1-e),this._g*(1-e),this._b*(1-e),this._a)}withAlpha(e){return new S(this._r,this._g,this._b,e)}mix(e,i=.5){let r=Math.max(0,Math.min(1,i));return new S(this._r+(e._r-this._r)*r,this._g+(e._g-this._g)*r,this._b+(e._b-this._b)*r,this._a+(e._a-this._a)*r)}complement(){return new S(255-this._r,255-this._g,255-this._b,this._a)}saturate(e){let i=this.toHSL();return i.s=Math.min(100,i.s+e*100),S.fromHSL(i.h,i.s,i.l,this._a)}desaturate(e){let i=this.toHSL();return i.s=Math.max(0,i.s-e*100),S.fromHSL(i.h,i.s,i.l,this._a)}rotateHue(e){let i=this.toHSL();return i.h=(i.h+e)%360,i.h<0&&(i.h+=360),S.fromHSL(i.h,i.s,i.l,this._a)}luminance(){let e=this._r/255,i=this._g/255,r=this._b/255,n=e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4),s=i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4),o=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4);return .2126*n+.7152*s+.0722*o}contrastWith(e){let i=this.luminance(),r=e.luminance(),n=Math.max(i,r),s=Math.min(i,r);return(n+.05)/(s+.05)}isLight(){return this.luminance()>.5}isDark(){return this.luminance()<=.5}equals(e){return this._r===e._r&&this._g===e._g&&this._b===e._b&&this._a===e._a}approximatelyEquals(e,i=1){return Math.abs(this._r-e._r)<=i&&Math.abs(this._g-e._g)<=i&&Math.abs(this._b-e._b)<=i&&Math.abs(this._a-e._a)<=i/255}clone(){return new S(this._r,this._g,this._b,this._a)}toString(){return this.toHex(this._a<1)}};S.WHITE=new S(255,255,255),S.BLACK=new S(0,0,0),S.TRANSPARENT=new S(0,0,0,0),S.RED=new S(255,0,0),S.GREEN=new S(0,255,0),S.BLUE=new S(0,0,255);var W=S;function We(t){let e=W.fromHex(t);return e?e.rgb:null}function Ve(t,e,i){return new W(t,e,i).toHex()}function Ne(t,e){let i=W.fromHex(t);return i?i.lighten(e).toHex():t}function Ye(t,e){let i=W.fromHex(t);return i?i.darken(e).toHex():t}var y=class y{constructor(e,i){this.x=e,this.y=i}static from(e){return new y(e.x,e.y)}static fromArray(e){return new y(e[0],e[1])}static fromPolar(e,i){return new y(Math.cos(e)*i,Math.sin(e)*i)}static zero(){return new y(0,0)}static up(){return new y(0,-1)}static down(){return new y(0,1)}static left(){return new y(-1,0)}static right(){return new y(1,0)}static lerp(e,i,r){return new y(e.x+(i.x-e.x)*r,e.y+(i.y-e.y)*r)}static distance(e,i){let r=i.x-e.x,n=i.y-e.y;return Math.sqrt(r*r+n*n)}static distanceSquared(e,i){let r=i.x-e.x,n=i.y-e.y;return r*r+n*n}static angleBetween(e,i){return Math.atan2(i.y-e.y,i.x-e.x)}static temp(e,i){return y._tempVec.x=e,y._tempVec.y=i,y._tempVec}add(e){return new y(this.x+e.x,this.y+e.y)}subtract(e){return new y(this.x-e.x,this.y-e.y)}multiply(e){return new y(this.x*e,this.y*e)}divide(e){if(e===0)throw new Error("Vec2: Division by zero");return new y(this.x/e,this.y/e)}negate(){return new y(-this.x,-this.y)}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}lengthSquared(){return this.x*this.x+this.y*this.y}normalize(){let e=this.length();return e===0?new y(0,0):new y(this.x/e,this.y/e)}setLength(e){return this.normalize().multiply(e)}limit(e){return this.lengthSquared()>e*e?this.setLength(e):this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}angle(){return Math.atan2(this.y,this.x)}rotate(e){let i=Math.cos(e),r=Math.sin(e);return new y(this.x*i-this.y*r,this.x*r+this.y*i)}perpendicular(){return new y(-this.y,this.x)}reflect(e){let i=2*this.dot(e);return new y(this.x-i*e.x,this.y-i*e.y)}projectOnto(e){let i=e.lengthSquared();if(i===0)return y.zero();let r=this.dot(e)/i;return e.multiply(r)}lerp(e,i){return new y(this.x+(e.x-this.x)*i,this.y+(e.y-this.y)*i)}moveTowards(e,i){let r=e.x-this.x,n=e.y-this.y,s=r*r+n*n;if(s===0||s<=i*i)return new y(e.x,e.y);let o=Math.sqrt(s);return new y(this.x+r/o*i,this.y+n/o*i)}distanceTo(e){return y.distance(this,e)}distanceToSquared(e){return y.distanceSquared(this,e)}angleTo(e){return y.angleBetween(this,e)}clamp(e,i,r,n){return new y(Math.max(e,Math.min(r,this.x)),Math.max(i,Math.min(n,this.y)))}round(){return new y(Math.round(this.x),Math.round(this.y))}floor(){return new y(Math.floor(this.x),Math.floor(this.y))}ceil(){return new y(Math.ceil(this.x),Math.ceil(this.y))}abs(){return new y(Math.abs(this.x),Math.abs(this.y))}equals(e){return this.x===e.x&&this.y===e.y}approximatelyEquals(e,i=1e-4){return Math.abs(this.x-e.x)<i&&Math.abs(this.y-e.y)<i}isZero(){return this.x===0&&this.y===0}toArray(){return[this.x,this.y]}toObject(){return{x:this.x,y:this.y}}clone(){return new y(this.x,this.y)}toString(){return`Vec2(${this.x}, ${this.y})`}};y._tempVec=new y(0,0);var $=y,re=class{constructor(e=0,i=0){this.x=e,this.y=i}set(e,i){return this.x=e,this.y=i,this}copy(e){return this.x=e.x,this.y=e.y,this}addMut(e){return this.x+=e.x,this.y+=e.y,this}subtractMut(e){return this.x-=e.x,this.y-=e.y,this}multiplyMut(e){return this.x*=e,this.y*=e,this}toVec2(){return new $(this.x,this.y)}};var k=class k{constructor(e,i=k.defaultConfig){this._progress=Math.max(0,Math.min(1,e)),this._stem=Math.min(1,this._progress*i.stemRate),this._leaf=Math.max(0,Math.min(1,(this._progress-i.leafStart)*i.leafRate)),this._flower=Math.max(0,Math.min(1,(this._progress-i.flowerStart)*i.flowerRate)),this._foliage=Math.max(0,(this._progress-R.FOLIAGE_START)*R.FOLIAGE_GROWTH_RATE),this._plume=this._progress>R.PLUME_START?(this._progress-R.PLUME_START)/(1-R.PLUME_START):0}static calculate(e,i,r,n){let s=(e-i)/r,o=n?{...k.defaultConfig,...n}:k.defaultConfig;return new k(s,o)}static fromProgress(e,i){let r=i?{...k.defaultConfig,...i}:k.defaultConfig;return new k(e,r)}static inactive(){return new k(0)}static complete(){return new k(1)}get progress(){return this._progress}get stem(){return this._stem}get leaf(){return this._leaf}get flower(){return this._flower}get foliage(){return this._foliage}get plume(){return this._plume}get isActive(){return this._progress>0}get isComplete(){return this._progress>=1}get hasLeaves(){return this._leaf>0}get hasFlower(){return this._flower>0}get hasFoliage(){return this._foliage>0}get hasPlume(){return this._plume>0}toObject(){return{progress:this._progress,stem:this._stem,leaf:this._leaf,flower:this._flower}}toExtendedObject(){return{progress:this._progress,stem:this._stem,leaf:this._leaf,flower:this._flower,foliage:this._foliage,plume:this._plume}}isInRange(e,i){return this._progress>=e&&this._progress<i}getPhaseProgress(e,i){return this._progress<=e?0:this._progress>=i?1:(this._progress-e)/(i-e)}eased(e="linear"){let i=this._progress;switch(e){case"ease-in":return i*i;case"ease-out":return i*(2-i);case"ease-in-out":return i<.5?2*i*i:-1+(4-2*i)*i;default:return i}}easedStem(e="ease-out"){return this._applyEasing(this._stem,e)}easedFlower(e="ease-out"){return this._applyEasing(this._flower,e)}_applyEasing(e,i){let r=e;switch(i){case"ease-in":return r*r;case"ease-out":return r*(2-r);case"ease-in-out":return r<.5?2*r*r:-1+(4-2*r)*r;default:return r}}equals(e){return this._progress===e._progress&&this._stem===e._stem&&this._leaf===e._leaf&&this._flower===e._flower&&this._foliage===e._foliage&&this._plume===e._plume}approximatelyEquals(e,i=1e-4){return Math.abs(this._progress-e._progress)<i&&Math.abs(this._stem-e._stem)<i&&Math.abs(this._leaf-e._leaf)<i&&Math.abs(this._flower-e._flower)<i&&Math.abs(this._foliage-e._foliage)<i&&Math.abs(this._plume-e._plume)<i}clone(){return k.fromProgress(this._progress)}toString(){return`GrowthProgress(${this._progress.toFixed(2)}: stem=${this._stem.toFixed(2)}, leaf=${this._leaf.toFixed(2)}, flower=${this._flower.toFixed(2)})`}};k.defaultConfig={stemRate:R.STEM_GROWTH_RATE,leafStart:R.LEAF_START,leafRate:R.LEAF_GROWTH_RATE,flowerStart:R.FLOWER_START,flowerRate:R.FLOWER_GROWTH_RATE};var ne=k;function Ue(t,e,i){let r=(t-e)/i;return r<=0?null:{progress:r,stem:Math.min(1,r*R.STEM_GROWTH_RATE),leaf:Math.max(0,Math.min(1,(r-R.LEAF_START)*R.LEAF_GROWTH_RATE)),flower:Math.max(0,Math.min(1,(r-R.FLOWER_START)*R.FLOWER_GROWTH_RATE))}}function Ke(t,e){return t>=e}function qe(t,e,i){return Math.max(0,Math.min(1,(t-e)/i))}var se=class t{constructor(e){this._initialSeed=e,this._seed=e}get seed(){return this._seed}get initialSeed(){return this._initialSeed}next(){let e=Math.sin(this._seed++*9999)*1e4;return e-Math.floor(e)}reset(){this._seed=this._initialSeed}setSeed(e){this._seed=e,this._initialSeed=e}fork(){return new t(this._seed*1e3+Math.floor(this.next()*1e3))}createGenerator(){let e=this.fork();return()=>e.next()}range(e,i){return e+this.next()*(i-e)}int(e,i){return Math.floor(this.range(e,i+1))}below(e){return Math.floor(this.next()*e)}centered(e){return(this.next()-.5)*2*e}around(e,i){return e+this.centered(i)}bool(){return this.next()<.5}chance(e){return this.next()<e}sign(){return this.bool()?1:-1}pick(e){if(e.length===0)throw new Error("SeededRandom.pick: Cannot pick from empty array");return e[this.below(e.length)]}pickIndex(e){if(e.length===0)throw new Error("SeededRandom.pickIndex: Cannot pick from empty array");return this.below(e.length)}pickMultiple(e,i){if(i>e.length)throw new Error("SeededRandom.pickMultiple: Count exceeds array length");let r=[],n=new Set;for(;r.length<i;){let s=this.below(e.length);n.has(s)||(n.add(s),r.push(e[s]))}return r}weightedPick(e){if(e.length===0)throw new Error("SeededRandom.weightedPick: Cannot pick from empty array");let i=e.reduce((n,s)=>n+s.weight,0),r=this.next()*i;for(let n of e)if(r-=n.weight,r<=0)return n.value;return e[e.length-1].value}shuffle(e){for(let i=e.length-1;i>0;i--){let r=this.below(i+1);[e[i],e[r]]=[e[r],e[i]]}return e}shuffled(e){let i=[...e];return this.shuffle(i)}gaussian(e=0,i=1){let r=this.next(),n=this.next();return Math.sqrt(-2*Math.log(r))*Math.cos(2*Math.PI*n)*i+e}exponential(e=1){return-Math.log(1-this.next())/e}biased(e){return Math.pow(this.next(),e)}centeredBias(){return(this.next()+this.next())/2}edgeBias(){let e=this.next()*2-1;return Math.abs(e)}angle(){return this.next()*Math.PI*2}degrees(){return this.next()*360}pointInCircle(){let e=this.angle(),i=Math.sqrt(this.next());return{x:Math.cos(e)*i,y:Math.sin(e)*i}}pointOnCircle(){let e=this.angle();return{x:Math.cos(e),y:Math.sin(e)}}pointInRect(e,i){return{x:this.next()*e,y:this.next()*i}}getState(){return{seed:this._seed,initialSeed:this._initialSeed}}setState(e){this._seed=e.seed,this._initialSeed=e.initialSeed}skip(e){this._seed+=e}static random(){return new t(Math.random()*1e5)}static fromString(e){let i=0;for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);i=(i<<5)-i+n,i=i&i}return new t(Math.abs(i))}};var ui={endX:0,endY:0},le=class{constructor(e){this.ctx=e}withState(e){this.ctx.save();try{e()}finally{this.ctx.restore()}}save(){return this.ctx.save(),this}restore(){return this.ctx.restore(),this}translate(e,i){return this.ctx.translate(e,i),this}rotate(e){return this.ctx.rotate(e),this}scale(e,i=e){return this.ctx.scale(e,i),this}resetTransform(){return this.ctx.setTransform(1,0,0,1,0,0),this}setFill(e){return this.ctx.fillStyle=e,this}setStroke(e,i){return this.ctx.strokeStyle=e,i!==void 0&&(this.ctx.lineWidth=i),this}setLineWidth(e){return this.ctx.lineWidth=e,this}setLineCap(e){return this.ctx.lineCap=e,this}setAlpha(e){return this.ctx.globalAlpha=e,this}setComposite(e){return this.ctx.globalCompositeOperation=e,this}fillRect(e,i,r,n,s){return s&&(this.ctx.fillStyle=s),this.ctx.fillRect(e,i,r,n),this}strokeRect(e,i,r,n,s){return s&&(this.ctx.strokeStyle=s),this.ctx.strokeRect(e,i,r,n),this}fillCircle(e,i,r,n){return r<=0?this:(this.ctx.beginPath(),this.ctx.arc(e,i,r,0,P.TWO_PI),n&&(this.ctx.fillStyle=n),this.ctx.fill(),this)}strokeCircle(e,i,r,n){return r<=0?this:(this.ctx.beginPath(),this.ctx.arc(e,i,r,0,P.TWO_PI),n&&(this.ctx.strokeStyle=n),this.ctx.stroke(),this)}fillEllipse(e,i,r,n,s=0,o){return r<=0||n<=0?this:(this.ctx.beginPath(),this.ctx.ellipse(e,i,r,n,s,0,P.TWO_PI),o&&(this.ctx.fillStyle=o),this.ctx.fill(),this)}line(e,i,r,n,s,o){return this.ctx.beginPath(),this.ctx.moveTo(e,i),this.ctx.lineTo(r,n),s&&(this.ctx.strokeStyle=s),o!==void 0&&(this.ctx.lineWidth=o),this.ctx.stroke(),this}drawStem(e,i,r,n,s,o,l,a=ui){if(l<=0)return null;let h=r*Math.min(1,l);this.ctx.beginPath(),this.ctx.moveTo(e,i);let u=e+o*h*P.STEM_CP1_LEAN,m=i-h*P.STEM_CP1_HEIGHT,p=e+o*h*P.STEM_CP2_LEAN,d=i-h*P.STEM_CP2_HEIGHT,g=e+o*h,b=i-h;return this.ctx.bezierCurveTo(u,m,p,d,g,b),this.ctx.strokeStyle=s,this.ctx.lineWidth=n,this.ctx.lineCap=te.LINE_CAP,this.ctx.stroke(),a.endX=g,a.endY=b,a}drawLeaf(e,i,r,n,s){return n<1?this:(this.withState(()=>{this.ctx.translate(e,i),this.ctx.rotate(r),this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.bezierCurveTo(n*.3,-n*.15,n*.7,-n*.15,n,0),this.ctx.bezierCurveTo(n*.7,n*.15,n*.3,n*.15,0,0),this.ctx.fillStyle=s,this.ctx.fill()}),this)}drawLeafPair(e,i,r,n,s,o,l,a=3){return this.drawLeaf(e-a,i,r,s,l),this.drawLeaf(e+a,i,n,o,l),this}drawLeavesAlongStem(e,i,r,n,s,o,l,a,h){for(let u=0;u<o.length;u++){let m=o[u],p=i-r*m*n,d=e+s*r*m,b=(u%2===0?-1:1)*.6;this.drawLeaf(d,p,b,l*a,h)}return this}drawRadialPetals(e,i,r,n,s,o,l,a=0){for(let h=0;h<r;h++){let u=h/r*P.TWO_PI+a;this.withState(()=>{this.ctx.translate(e,i),this.ctx.rotate(u),this.ctx.beginPath(),this.ctx.ellipse(o,0,n,s,0,0,P.TWO_PI),this.ctx.fillStyle=l,this.ctx.fill()})}return this}drawFlowerCenter(e,i,r,n){return this.fillCircle(e,i,r,n)}beginPath(){return this.ctx.beginPath(),this}moveTo(e,i){return this.ctx.moveTo(e,i),this}lineTo(e,i){return this.ctx.lineTo(e,i),this}quadraticCurveTo(e,i,r,n){return this.ctx.quadraticCurveTo(e,i,r,n),this}bezierCurveTo(e,i,r,n,s,o){return this.ctx.bezierCurveTo(e,i,r,n,s,o),this}closePath(){return this.ctx.closePath(),this}fill(e){return e&&(this.ctx.fillStyle=e),this.ctx.fill(),this}stroke(e){return e&&(this.ctx.strokeStyle=e),this.ctx.stroke(),this}createLinearGradient(e,i,r,n){return this.ctx.createLinearGradient(e,i,r,n)}createRadialGradient(e,i,r,n,s,o){return this.ctx.createRadialGradient(e,i,r,n,s,o)}setFont(e){return this.ctx.font=e,this}setTextAlign(e){return this.ctx.textAlign=e,this}fillText(e,i,r,n){return n&&(this.ctx.fillStyle=n),this.ctx.fillText(e,i,r),this}strokeText(e,i,r,n){return n&&(this.ctx.strokeStyle=n),this.ctx.strokeText(e,i,r),this}clear(e){return e?(this.ctx.fillStyle=e,this.ctx.fillRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)):this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this}clearRect(e,i,r,n){return this.ctx.clearRect(e,i,r,n),this}getContext(){return this.ctx}getDimensions(){return{width:this.ctx.canvas.width,height:this.ctx.canvas.height}}};function Xe(t,e,i,r,n,s,o,l){if(l<=0)return null;let a=r*Math.min(1,l);t.beginPath(),t.moveTo(e,i);let h=e+o*a*P.STEM_CP1_LEAN,u=i-a*P.STEM_CP1_HEIGHT,m=e+o*a*P.STEM_CP2_LEAN,p=i-a*P.STEM_CP2_HEIGHT,d=e+o*a,g=i-a;return t.bezierCurveTo(h,u,m,p,d,g),t.strokeStyle=s,t.lineWidth=n,t.lineCap=te.LINE_CAP,t.stroke(),{x:d,y:g}}function oe(t,e,i,r,n,s){n<1||(t.save(),t.translate(e,i),t.rotate(r),t.beginPath(),t.moveTo(0,0),t.bezierCurveTo(n*.3,-n*.15,n*.7,-n*.15,n,0),t.bezierCurveTo(n*.7,n*.15,n*.3,n*.15,0,0),t.fillStyle=s,t.fill(),t.restore())}function $e(t,e,i,r,n,s,o,l,a=3){oe(t,e-a,i,r,s,l),oe(t,e+a,i,n,o,l)}var ae=class{constructor(){this.listeners=new Map}on(e,i){this.listeners.has(e)||this.listeners.set(e,new Set);let r={handler:i,once:!1};return this.listeners.get(e).add(r),()=>{this.off(e,i)}}once(e,i){this.listeners.has(e)||this.listeners.set(e,new Set);let r={handler:i,once:!0};return this.listeners.get(e).add(r),()=>{this.off(e,i)}}off(e,i){let r=this.listeners.get(e);if(r){for(let n of r)if(n.handler===i){r.delete(n);break}r.size===0&&this.listeners.delete(e)}}emit(e,i){let r=this.listeners.get(e);if(!r)return;let n=[];for(let s of r){try{s.handler(i)}catch(o){console.error(`Error in event handler for "${e}":`,o)}s.once&&n.push(s)}for(let s of n)r.delete(s);r.size===0&&this.listeners.delete(e)}hasListeners(e){let i=this.listeners.get(e);return i!==void 0&&i.size>0}listenerCount(e){let i=this.listeners.get(e);return i?i.size:0}removeAllListeners(e){e?this.listeners.delete(e):this.listeners.clear()}eventNames(){return Array.from(this.listeners.keys())}},ue=class{constructor(){this.listeners=new Map}on(e,i){this.listeners.has(e)||this.listeners.set(e,new Set);let r={handler:i,once:!1};return this.listeners.get(e).add(r),()=>this.off(e,i)}once(e,i){this.listeners.has(e)||this.listeners.set(e,new Set);let r={handler:i,once:!0};return this.listeners.get(e).add(r),()=>this.off(e,i)}off(e,i){let r=this.listeners.get(e);if(r){for(let n of r)if(n.handler===i){r.delete(n);break}r.size===0&&this.listeners.delete(e)}}emit(e,i){let r=this.listeners.get(e);if(!r)return;let n=[];for(let s of r){try{s.handler(i)}catch(o){console.error(`Error in event handler for "${String(e)}":`,o)}s.once&&n.push(s)}for(let s of n)r.delete(s);r.size===0&&this.listeners.delete(e)}removeAllListeners(e){e?this.listeners.delete(e):this.listeners.clear()}};var G=class{static detect(){if(this._cached)return this._cached;if(!(typeof window<"u"&&typeof document<"u"))return this._cached={isBrowser:!1,hasCanvas:!1,hasResizeObserver:!1,hasRAF:!1,isHighDPI:!1,pixelRatio:1,hasTouch:!1,isMobile:!1,prefersReducedMotion:!1,prefersDarkMode:!1,isPageVisible:!0},this._cached;let i=window.devicePixelRatio||1;return this._cached={isBrowser:!0,hasCanvas:this.checkCanvasSupport(),hasResizeObserver:typeof ResizeObserver<"u",hasRAF:typeof requestAnimationFrame<"u",isHighDPI:i>1,pixelRatio:i,hasTouch:this.checkTouchSupport(),isMobile:this.checkMobile(),prefersReducedMotion:this.checkReducedMotion(),prefersDarkMode:this.checkDarkMode(),isPageVisible:this.checkPageVisibility()},this._cached}static clearCache(){this._cached=null}static checkCanvasSupport(){try{let e=document.createElement("canvas");return!!(e.getContext&&e.getContext("2d"))}catch{return!1}}static checkTouchSupport(){return"ontouchstart"in window||navigator.maxTouchPoints>0||(navigator.msMaxTouchPoints||0)>0}static checkMobile(){let e=navigator.userAgent.toLowerCase(),r=["android","webos","iphone","ipad","ipod","blackberry","windows phone"].some(o=>e.includes(o)),n=window.innerWidth<=768,s=this.checkTouchSupport();return r||s&&n}static checkReducedMotion(){return typeof window>"u"?!1:window.matchMedia("(prefers-reduced-motion: reduce)").matches}static checkDarkMode(){return typeof window>"u"?!1:window.matchMedia("(prefers-color-scheme: dark)").matches}static checkPageVisibility(){return typeof document>"u"?!0:!document.hidden}static prefersReducedMotion(){return this.detect().prefersReducedMotion}static prefersDarkMode(){return this.detect().prefersDarkMode}static getPixelRatio(e=2){let i=this.detect();return Math.min(i.pixelRatio,e)}static isPageVisible(){return typeof document>"u"?!0:!document.hidden}static isSupported(){let e=this.detect();return e.isBrowser&&e.hasCanvas&&e.hasRAF}static getRecommendedSettings(){let e=this.detect();return e.isMobile&&e.pixelRatio>2?{maxPixelRatio:1.5,targetFPS:24,density:"sparse"}:e.isMobile?{maxPixelRatio:2,targetFPS:30,density:"normal"}:e.isHighDPI?{maxPixelRatio:2,targetFPS:30,density:"normal"}:{maxPixelRatio:1,targetFPS:30,density:"dense"}}static onVisibilityChange(e){return typeof document>"u"?()=>{}:(this._visibilityListeners.add(e),this._visibilityHandler||(this._visibilityHandler=()=>{let i=!document.hidden;for(let r of this._visibilityListeners)try{r(i)}catch(n){console.error("Error in visibility change handler:",n)}},document.addEventListener("visibilitychange",this._visibilityHandler)),()=>{this._visibilityListeners.delete(e),this._visibilityListeners.size===0&&this._visibilityHandler&&(document.removeEventListener("visibilitychange",this._visibilityHandler),this._visibilityHandler=null)})}static onReducedMotionChange(e){if(typeof window>"u")return()=>{};let i=window.matchMedia("(prefers-reduced-motion: reduce)"),r=n=>{this._cached=null,e(n.matches)};return i.addEventListener?(i.addEventListener("change",r),()=>i.removeEventListener("change",r)):(i.addListener(r),()=>i.removeListener(r))}static onDarkModeChange(e){if(typeof window>"u")return()=>{};let i=window.matchMedia("(prefers-color-scheme: dark)"),r=n=>{this._cached=null,e(n.matches)};return i.addEventListener?(i.addEventListener("change",r),()=>i.removeEventListener("change",r)):(i.addListener(r),()=>i.removeListener(r))}static onResize(e){if(typeof window>"u")return()=>{};let i=()=>{e(window.innerWidth,window.innerHeight)};return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)}};G._cached=null,G._visibilityListeners=new Set,G._visibilityHandler=null;function Ze(){return G.prefersReducedMotion()}function je(t){return G.getPixelRatio(t)}function Je(){return G.detect().isBrowser}function Qe(){return G.detect().hasCanvas}var he={natural:{name:"Natural",palette:"natural",accent:Se.DEFAULT_ACCENT},sunset:{name:"Sunset",palette:"warm",accent:"#FF6B35",fadeColor:"#FFF5EB"},ocean:{name:"Ocean",palette:"cool",accent:"#0077B6",fadeColor:"#F0F8FF"},monochrome:{name:"Monochrome",palette:"monochrome",accent:"#666666",fadeColor:"#F5F5F5"},vibrant:{name:"Vibrant",palette:"vibrant",accent:"#FF1493"},sakura:{name:"Sakura",palette:"natural",accent:"#FFB7C5",flowerColors:["#FFB7C5","#FFDCE5","#FFC0CB","#FF69B4","#FFFFFF"],fadeColor:"#FFF5F7"},lavender:{name:"Lavender",palette:"cool",accent:"#9370DB",flowerColors:["#9370DB","#E6E6FA","#DDA0DD","#BA55D3","#8B008B"],foliageColors:["#556B2F","#6B8E23","#808000"],fadeColor:"#F5F0FF"},autumn:{name:"Autumn",palette:"warm",accent:"#D2691E",flowerColors:["#D2691E","#CD853F","#DAA520","#B8860B","#8B4513","#FF8C00"],foliageColors:["#8B4513","#A0522D","#CD853F","#D2691E"],fadeColor:"#FFF8DC"},midnight:{name:"Midnight",palette:"cool",accent:"#4169E1",flowerColors:["#4169E1","#6A5ACD","#9932CC","#8A2BE2","#483D8B"],foliageColors:["#2F4F4F","#006400","#228B22"],fadeColor:"#1A1A2E"},tropical:{name:"Tropical",palette:"vibrant",accent:"#FF4500",flowerColors:["#FF4500","#FF6347","#FFD700","#00CED1","#FF1493","#32CD32"],foliageColors:["#006400","#228B22","#32CD32"]},zen:{name:"Zen",palette:"monochrome",accent:"#8B8B83",flowerColors:["#FFFFFF","#F5F5F5","#E8E8E8","#98FB98"],foliageColors:["#556B2F","#6B8E23"],fadeColor:"#FAFAFA"}},ce={default:{name:"Default",description:"Balanced garden with moderate density and natural colors",options:{duration:600,generations:47,density:"normal",maxHeight:.35}},demo:{name:"Demo",description:"Fast 30-second animation for demonstrations",options:{duration:30,generations:10,density:"normal",maxHeight:.35,speed:1}},subtle:{name:"Subtle",description:"Sparse, low-opacity garden for website backgrounds",options:{duration:900,generations:30,density:"sparse",maxHeight:.25,opacity:.6,fadeHeight:.15}},lush:{name:"Lush",description:"Dense, vibrant garden with maximum plant coverage",options:{duration:600,generations:60,density:"lush",maxHeight:.45}},forest:{name:"Forest",description:"Tall garden with trees, climbers, and tall flowers",options:{duration:900,generations:50,density:"dense",maxHeight:.8,categories:["small-tree","conifer","climber","giant-grass","fern","bush"]}},meadow:{name:"Meadow",description:"Low wildflower meadow with grasses",options:{duration:600,generations:50,density:"dense",maxHeight:.25,categories:["wildflower","daisy","grass","simple-flower"]}},roseGarden:{name:"Rose Garden",description:"Elegant garden focused on roses",options:{duration:600,generations:40,density:"normal",maxHeight:.35,categories:["rose","bush","fern"]}},tropical:{name:"Tropical",description:"Lush tropical garden with palms and exotic flowers",options:{duration:600,generations:40,density:"dense",maxHeight:.7,categories:["tropical","orchid","lily","bird-of-paradise","fern"]}},herbs:{name:"Herb Garden",description:"Fragrant herb garden with lavender and sage",options:{duration:600,generations:35,density:"normal",maxHeight:.25,categories:["herb","bush","grass"]}},succulent:{name:"Succulent Garden",description:"Low-maintenance succulent arrangement",options:{duration:300,generations:25,density:"dense",maxHeight:.15,categories:["succulent"]}},ambient:{name:"Ambient",description:"Very slow, continuous background animation",options:{duration:3600,generations:100,density:"sparse",maxHeight:.3,loop:!0,opacity:.5,fadeHeight:.1}},performance:{name:"Performance",description:"Optimized for lower-end devices",options:{duration:600,generations:30,density:"sparse",maxHeight:.3,targetFPS:24,maxPixelRatio:1}}};function Re(t,e={}){let i=typeof t=="string"?he[t]:t;if(!i)return console.warn(`Theme "${t}" not found, using natural`),e;let r={palette:i.palette,accent:i.accent,flowerColors:i.flowerColors,foliageColors:i.foliageColors,...e.colors};return{...e,colors:r,fadeColor:i.fadeColor??e.fadeColor}}function ve(t,e={}){let i=typeof t=="string"?ce[t]:t;return i?{...i.options,...e}:(console.warn(`Preset "${t}" not found, using default`),e)}function et(t,e="natural",i={}){let r=ve(t,{});return{...Re(e,r),...i}}function tt(){return Object.keys(he)}function it(){return Object.keys(ce)}function rt(t,e){return{name:t,...e}}function nt(t,e,i){return{name:t,options:e,description:i}}function st(t){return{sparse:{density:"sparse",generations:30},normal:{density:"normal",generations:47},dense:{density:"dense",generations:55},lush:{density:"lush",generations:65}}[t]}function lt(t){return{slow:{speed:.5,duration:1200},normal:{speed:1,duration:600},fast:{speed:2,duration:300},instant:{speed:10,duration:60}}[t]}return Ft(hi);})();
//# sourceMappingURL=index.global.js.map